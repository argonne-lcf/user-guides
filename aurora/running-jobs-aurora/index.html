<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.alcf.anl.gov/aurora/running-jobs-aurora/ rel=canonical><link href=../build-tools/cmake-aurora/ rel=prev><link href=../data-management/copper/copper/ rel=next><link rel=icon href=../../images/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Running Jobs - ALCF User Guides</title><link rel=stylesheet href=../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=proxima-nova:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"proxima-nova";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/alcf-extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-4M48E2L33R"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-4M48E2L33R",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-4M48E2L33R",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=https://use.typekit.net/pxo0nvo.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#running-jobs-on-aurora class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <!-- Header --> <!-- component: header --> <header class=md-header data-md-component=header> <div class=header--primary> <div class=grid> <div class=header__site-title> <h1><a href=https://www.alcf.anl.gov/ >Argonne Leadership Computing Facility</a></h1> </div> <nav class=header__nav-primary> <ul> <li id=nav-res class=js-drop data-menu=menu-res> <a href=https://www.alcf.anl.gov/alcf-resources>ALCF Resources</a> <div id=menu-res class="dropdown js-dropdown-hidden"> <nav> <div class=dropdown__intro> <div class=dropdown__intro-subhead> <h2>Leadership Computing Resources</h2> </div> <div class=dropdown__intro-description> <p> The ALCF provides users with access to supercomputing resources that are significantly more powerful than systems typically used for open scientific research. </p> </div> </div> <div class=dropdown__links-1> <div class=dropdown__links-group> <h3>Computing Resources</h3> <ul> <li><a href=https://www.alcf.anl.gov/aurora>Aurora</a></li> <li><a href=https://www.alcf.anl.gov/polaris>Polaris</a></li> <li><a href=https://www.alcf.anl.gov/sophia>Sophia</a></li> <li><a href=https://www.alcf.anl.gov/crux>Crux</a></li> <li><a href=https://www.alcf.anl.gov/alcf-ai-testbed>ALCF AI Testbed</a></li> <li><a href=https://www.alcf.anl.gov/alcf-resources/evaluation-testbeds>Evaluation Testbeds</a> </li> <li><a href=https://www.alcf.anl.gov/alcf-resources/storage-and-networking>Storage and Networking</a></li> </ul> </div> </div> <div class=dropdown__links-2> <div class=dropdown__links-group> <h3>Facility Expertise</h3> <ul> <li><a href=https://www.alcf.anl.gov/alcf-resources/facility-expertise>Facility Expertise</a> </li> </ul> </div> </div> <div class=dropdown__featured> <a href=https://alcf.anl.gov/aurora> <div class=dropdown__featured-title> <h3>Featured: Aurora</h3> </div> <div class=dropdown__featured-image> <div class=img-wrapper> <img src=https://docs.alcf.anl.gov//images/aurora.png> </div> </div> </a> </div> </nav> </div> </li> <li id=nav-sci class=js-drop data-menu=menu-sci> <a href=https://www.alcf.anl.gov/science>Science and Engineering</a> <div id=menu-sci class="dropdown js-dropdown-hidden"> <nav> <div class=dropdown__intro> <div class=dropdown__intro-subhead> <h2>Computational Science</h2> </div> <div class=dropdown__intro-description> <p>The ALCF is accelerating scientific discoveries in many disciplines, ranging from chemistry and engineering to physics and materials science.</p> </div> </div> <div class=dropdown__links-1> <div class=dropdown__links-group> <h3>Output</h3> <ul> <li><a href=https://www.alcf.anl.gov/science/projects>Projects</a></li> <li><a href=https://www.alcf.anl.gov/science/publications>Publications</a></li> <li><a href=https://www.alcf.anl.gov/case-studies>Case Studies</a></li> </ul> </div> </div> <div class=dropdown__links-2> <div class=dropdown__links-group> <h3>Allocation Programs</h3> <ul> <li><a href=https://www.alcf.anl.gov/science/incite-allocation-program>INCITE Program</a></li> <li><a href=https://www.alcf.anl.gov/science/alcc-allocation-program>ALCC Program</a></li> <li><a href=https://www.alcf.anl.gov/science/directors-discretionary-allocation-program>Director’s Discretionary</a></li> <li><a href=https://www.alcf.anl.gov/science/early-science-program>Early Science Program</a> </li> <li><a href=https://www.alcf.anl.gov/nairr-program>NAIRR Program</a></li> </ul> </div> </div> <div class=dropdown__featured> <a href=https://www.alcf.anl.gov/science/projects/Engineering> <div class=dropdown__featured-title> <h3>Featured: Engineering</h3> </div> <div class=dropdown__featured-image> <div class=img-wrapper> <img src=https://docs.alcf.anl.gov//images/engineering.png> </div> </div> </a> </div> </nav> </div> </li> <li id=nav-cp class=js-drop data-menu=menu-cp> <a href=#https://www.alcf.anl.gov/community-and-partnerships>Community and Outreach</a> <div id=menu-cp class="dropdown js-dropdown-hidden"> <nav> <div class=dropdown__intro> <div class=dropdown__intro-subhead> <h2>Growing the HPC Community</h2> </div> <div class=dropdown__intro-description> <p>The ALCF is committed to providing training and outreach opportunities that prepare researchers to efficiently use its leadership computing systems, while also cultivating a diverse and skilled HPC workforce for the future.</p> </div> </div> <div class=dropdown__links-1> <div class=dropdown__links-group> <h3>Partnerships</h3> <ul> <li><a href=https://www.alcf.anl.gov/community-and-partnerships/industry>Industry</a></li> <li><a href=https://www.alcf.anl.gov/community-and-partnerships/partners>Collaborations</a></li> </ul> </div> <div class=dropdown__links-group> <h3>Community</h3> <ul> <li><a href=https://www.alcf.anl.gov/nairr-pilot>NAIRR Pilot</a></li> <li><a href=https://www.alcf.anl.gov/lighthouse>Lighthouse Initiative</a></li> </ul> </div> </div> <div class=dropdown__links-2> <div class=dropdown__links-group> <h3>Educational Outreach</h3> <ul> <li><a href=https://www.alcf.anl.gov/community-and-partnerships/women-in-stem>Women in STEM</a> </li> <li><a href=https://www.alcf.anl.gov/community-and-partnerships/student-outreach>Student Programs</a></li> </ul> </div> </div> </nav> </div> </li> <li id=nav-abt class=js-drop data-menu=menu-abt> <a href=https://www.alcf.anl.gov/about>About</a> <div id=menu-abt class="dropdown js-dropdown-hidden"> <nav> <div class=dropdown__intro> <div class=dropdown__intro-subhead> <h2>Accelerating Science</h2> </div> <div class=dropdown__intro-description> <p>The Argonne Leadership Computing Facility enables breakthroughs in science and engineering by providing supercomputing resources and expertise to the research community.</p> </div> </div> <div class=dropdown__links-1> <div class=dropdown__links-group> <h3>Get to Know More</h3> <ul> <li><a href=https://www.alcf.anl.gov/about/alcf-leadership-team>Leadership</a></li> <li><a href=https://www.alcf.anl.gov/about/people>People</a></li> <li><a href=https://www.alcf.anl.gov/alcf-organizational-chart>Organizational Chart</a></li> <li><a href=https://www.alcf.anl.gov/about/code-of-conduct>Code of Conduct</a></li> <li><a href=https://www.alcf.anl.gov/about/user-advisory-council>User Advisory Council</a></li> <li><a href=https://www.alcf.anl.gov/about/history>History</a></li> </ul> </div> </div> <div class=dropdown__links-2> <div class=dropdown__links-group> <h3>Visit</h3> <ul> <li><a href=https://www.alcf.anl.gov/about/visiting-alcf>Visiting ALCF</a></li> <li><a href=https://www.alcf.anl.gov/about/tours>Tours</a></li> </ul> </div> </div> <div class=dropdown__links-21> <div class=dropdown__links-group> <h3>Latest</h3> <ul> <li><a href=https://www.alcf.anl.gov/news>News</a></li> <li><a href=https://www.alcf.anl.gov/about/careers>Careers</a></li> </ul> </div> </div> <div class=dropdown__links-22> <div class=dropdown__links-group> <h3>Press Kits</h3> <ul> <li><a href=https://www.alcf.anl.gov/alcf-media-kit>ALCF Media Kit</a></li> <li><a href=https://www.alcf.anl.gov/aurora-media-kit>Aurora Media Kit</a></li> <li><a href=https://www.alcf.anl.gov/report-archive>Reports Archive</a></li> </ul> </div> </div> </nav> </div> </li> <li id=nav-sup class=js-drop data-menu=menu-sup> <a href=https://www.alcf.anl.gov/support-center>Support</a> <div id=menu-sup class="dropdown js-dropdown-hidden"> <nav> <div class=dropdown__intro> <div class=dropdown__intro-subhead> <h2>Support Center</h2> </div> <div class=dropdown__intro-description> <p>The ALCF Support Center assists users with support requests related to their ALCF projects.</p> <small> <strong>Help Desk</strong><br> Hours: 9:00am-5:00pm CT M-F<br> Email: <a href=mailto:support@alcf.anl.gov>mailto:support@alcf.anl.gov</a> </small> </div> </div> <div class=dropdown__links-1> <div class=dropdown__links-group> <h3>Current</h3> <ul> <li><a href=https://www.alcf.anl.gov/support-center/machine-status>Machine Status</a></li> <li><a href=https://www.alcf.anl.gov/support-center/facility-updates>Facility Updates</a></li> <li><a href=" https://my.alcf.anl.gov">MyALCF</a></li> </ul> <br> <h3>Training</h3> <ul> <li><a href=https://www.alcf.anl.gov/support-center/training-assets>Training Videos & Slides</a> </li> <li><a href=https://www.alcf.anl.gov/support-center/training-overview>Training Overview</a></li> <li><a href=https://www.alcf.anl.gov/events>Training and Events</a></li> </ul> </div> </div> <div class=dropdown__links-2> <div class=dropdown__links-group> <h3><a href=https://docs.alcf.anl.gov/ >User Guides</a></h3> <ul> <!-- <li><a href="https://www.alcf.anl.gov/support-center/get-started">Get Started</a></li> --> <li><a href=https://docs.alcf.anl.gov/aurora/ >Aurora</a></li> <li><a href=https://docs.alcf.anl.gov/ai-testbed/ >AI Testbed</a></li> <li><a href=https://docs.alcf.anl.gov/crux/ >Crux</a></li> <li><a href=https://docs.alcf.anl.gov/polaris/ >Polaris</a></li> <li><a href=https://docs.alcf.anl.gov/sophia/ >Sophia</a></li> <!-- add "user support, then "running jobs" links? --> <li><a href=https://docs.alcf.anl.gov/data-management/ >Data Management</a></li> <li><a href=https://docs.alcf.anl.gov/services/ >Services</a></li> <li><a href=https://docs.alcf.anl.gov/account-project-management/ >Account and Project Management</a></li> <li><a href=https://docs.alcf.anl.gov/policies/ >Facility Policies</a></li> </ul> </div> </div> <div class=dropdown__featured> <a href=https://www.alcf.anl.gov/support-center/get-started> <div class=dropdown__featured-title> <h3>Featured: Get Started</h3> </div> <div class=dropdown__featured-image> <div class=img-wrapper> <img src=https://docs.alcf.anl.gov//images/getstarted.png> </div> </div> </a> <a href=https://my.alcf.anl.gov> <div class=dropdown__featured-title> <h3>Featured: MyALCF</h3> </div> <div class=dropdown__featured-image> <div class=img-wrapper> <img src=https://docs.alcf.anl.gov//images/myalcf.png> </div> </div> </a> </div> </nav> </div> </li> </ul> </nav> <nav class=header__nav-secondary> <!-- wrapper needed to hang right --> <div class=header__nav-secondary--right> <ul> <li><a href=https://www.alcf.anl.gov/news> News </a></li> <li><a href=https://www.alcf.anl.gov/events> Events </a></li> <li><a href=https://www.alcf.anl.gov/about/people> People </a></li> <li><a href=https://www.alcf.anl.gov/about/careers> Careers </a></li> <li><a href=https://my.alcf.anl.gov style=text-transform:none;> MyALCF</a></li> </ul> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=alcf data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> <!-- Navigation tabs (sticky) --> </div> </div> </header> <!-- Mobile Header --> <header class="md-header header--mobile" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <!-- Link to home --> <a href=https://docs.alcf.anl.gov title="ALCF User Guides" class="md-header__button md-logo" aria-label="ALCF User Guides" data-md-component=logo> <img src=../../images/logo.svg alt=logo> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ALCF User Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Running Jobs </span> </div> </div> </div> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=alcf data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!--  --> <!--   <label class="md-header__button md-icon" for="__search"> --> <!--      --> <!--     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> --> <!--   </label> --> <!----> <!--   <!-- Search interface --> <!--   <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div> --> <!--  --> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/argonne-lcf/user-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> argonne-lcf/user-guides </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://docs.alcf.anl.gov title="ALCF User Guides" class="md-nav__button md-logo" aria-label="ALCF User Guides" data-md-component=logo> <img src=../../images/logo.svg alt=logo> </a> <a href=/ title="ALCF User Guides" class="md-nav__link "> <span class=md-ellipsis> ALCF User Guides </span> </a> </label> <div class=md-nav__source> <a href=https://github.com/argonne-lcf/user-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> argonne-lcf/user-guides </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://www.alcf.anl.gov/support-center/get-started class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../support/docs-issues/ class=md-nav__link> <span class=md-ellipsis> Contribute to User Guides </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../support/ class="md-nav__link "> <span class=md-ellipsis> User Support </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Support </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../support/ticket/ class=md-nav__link> <span class=md-ellipsis> Submit a Ticket </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../support/get-help/ class="md-nav__link "> <span class=md-ellipsis> Get Help & Connect </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Get Help & Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../support/get-help/mailing-lists/ class=md-nav__link> <span class=md-ellipsis> Mailing Lists </span> </a> </li> <li class=md-nav__item> <a href=../../support/get-help/software-requests/ class=md-nav__link> <span class=md-ellipsis> Request Software </span> </a> </li> <li class=md-nav__item> <a href=../../support/get-help/alcf-users-slack/ class=md-nav__link> <span class=md-ellipsis> ALCF Users Slack </span> </a> </li> <li class=md-nav__item> <a href=../../support/get-help/office-hours/ class=md-nav__link> <span class=md-ellipsis> Aurora Office Hours </span> </a> </li> <li class=md-nav__item> <a href=../../support/get-help/askalcf/ class=md-nav__link> <span class=md-ellipsis> AskALCF Chatbot </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__container"> <a href=../../machines/ class="md-nav__link "> <span class=md-ellipsis> Machines </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Machines </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Aurora </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Aurora </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../node-performance-overview/node-performance-overview/ class=md-nav__link> <span class=md-ellipsis> Node Performance Overview </span> </a> </li> <li class=md-nav__item> <a href=../getting-started-on-aurora/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../known-issues/ class=md-nav__link> <span class=md-ellipsis> Known Issues </span> </a> </li> <li class=md-nav__item> <a href=../system-updates/ class=md-nav__link> <span class=md-ellipsis> System Updates </span> </a> </li> <li class=md-nav__item> <a href=../aurora-pe/ class=md-nav__link> <span class=md-ellipsis> Aurora Programming Environment </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_7> <div class="md-nav__link md-nav__container"> <a href=../compiling-and-linking/ class="md-nav__link "> <span class=md-ellipsis> Compiling and Linking </span> </a> <label class="md-nav__link " for=__nav_4_2_7 id=__nav_4_2_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_7> <span class="md-nav__icon md-icon"></span> Compiling and Linking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../compiling-and-linking/aurora-programming-models/ class=md-nav__link> <span class=md-ellipsis> Programming Models </span> </a> </li> <li class=md-nav__item> <a href=../compiling-and-linking/aurora-example-program-makefile/ class=md-nav__link> <span class=md-ellipsis> Example Program and Makefile </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_8> <label class=md-nav__link for=__nav_4_2_8 id=__nav_4_2_8_label tabindex=0> <span class=md-ellipsis> Build Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_8> <span class="md-nav__icon md-icon"></span> Build Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../build-tools/cmake-aurora/ class=md-nav__link> <span class=md-ellipsis> CMake </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Running Jobs </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Running Jobs </span> </a> <!-- Table of Contents --> <!-- --------------------------------------------------------------------- --> <nav class="md-nav md-nav--secondary" aria-label> <label class=md-nav__title for=__toc> Table of contents </label> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#queues class=md-nav__link> <span class=md-ellipsis> Queues </span> </a> <nav class=md-nav aria-label=Queues> <ul class=md-nav__list> <li class=md-nav__item> <a href=#submitting-a-job class=md-nav__link> <span class=md-ellipsis> Submitting a job </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#working-around-node-failures class=md-nav__link> <span class=md-ellipsis> Working around node failures </span> </a> <nav class=md-nav aria-label="Working around node failures"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#removing-known-bad-nodes class=md-nav__link> <span class=md-ellipsis> Removing "known" bad nodes </span> </a> </li> <li class=md-nav__item> <a href=#using-tolerate_node_failuresall class=md-nav__link> <span class=md-ellipsis> Using tolerate_node_failures=all </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aurora-mpich class=md-nav__link> <span class=md-ellipsis> Aurora MPICH </span> </a> </li> <li class=md-nav__item> <a href=#running-mpiopenmpsycl-applications class=md-nav__link> <span class=md-ellipsis> Running MPI+OpenMP+SYCL Applications </span> </a> </li> <li class=md-nav__item> <a href=#running-gpu-enabled-applications class=md-nav__link> <span class=md-ellipsis> Running GPU-enabled Applications </span> </a> </li> <li class=md-nav__item> <a href=#mpi-rank-and-thread-binding-to-cores-and-gpus class=md-nav__link> <span class=md-ellipsis> MPI rank and thread binding to cores and GPUs </span> </a> <nav class=md-nav aria-label="MPI rank and thread binding to cores and GPUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#binding-mpi-ranks-and-threads-to-cores class=md-nav__link> <span class=md-ellipsis> Binding MPI ranks and threads to cores </span> </a> <nav class=md-nav aria-label="Binding MPI ranks and threads to cores"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-2-nodes-4-ranksnode-1-threadrank class=md-nav__link> <span class=md-ellipsis> Example 1: 2 nodes, 4 ranks/node, 1 thread/rank </span> </a> </li> <li class=md-nav__item> <a href=#example-2-2-nodes-2-ranksnode-2-threadrank class=md-nav__link> <span class=md-ellipsis> Example 2: 2 nodes, 2 ranks/node, 2 thread/rank </span> </a> </li> <li class=md-nav__item> <a href=#example-3-2-nodes-2-ranksnode-1-threadrank-compact-fashion class=md-nav__link> <span class=md-ellipsis> Example 3: 2 nodes, 2 ranks/node, 1 thread/rank, compact fashion </span> </a> </li> <li class=md-nav__item> <a href=#example-4-1-node-12-ranksnode class=md-nav__link> <span class=md-ellipsis> Example 4: 1 node, 12 ranks/node </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#binding-mpi-ranks-to-gpus class=md-nav__link> <span class=md-ellipsis> Binding MPI ranks to GPUs </span> </a> <nav class=md-nav aria-label="Binding MPI ranks to GPUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-binding-mpi-ranks-to-gpus-using-gpu_tile_compactsh-and-gpu_dev_compactsh-scripts class=md-nav__link> <span class=md-ellipsis> 1) Binding MPI ranks to GPUs using gpu_tile_compact.sh and gpu_dev_compact.sh scripts </span> </a> <nav class=md-nav aria-label="1) Binding MPI ranks to GPUs using gpu_tile_compact.sh and gpu_dev_compact.sh scripts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile class=md-nav__link> <span class=md-ellipsis> Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile </span> </a> </li> <li class=md-nav__item> <a href=#example-2-implicit-scaling-1-node-6-ranksnode-1-threadrank-1-rankgpu class=md-nav__link> <span class=md-ellipsis> Example 2: (Implicit Scaling) 1 node, 6 ranks/node, 1 thread/rank, 1 rank/GPU </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-binding-mpi-ranks-to-gpus-using-gpu-bind-option-from-mpich class=md-nav__link> <span class=md-ellipsis> 2) Binding MPI ranks to GPUs using --gpu-bind option from MPICH </span> </a> <nav class=md-nav aria-label="2) Binding MPI ranks to GPUs using --gpu-bind option from MPICH"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile_1 class=md-nav__link> <span class=md-ellipsis> Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interactive-jobs-on-compute-nodes class=md-nav__link> <span class=md-ellipsis> Interactive Jobs on Compute Nodes </span> </a> </li> <li class=md-nav__item> <a href=#running-with-multiple-compute-command-streamers-ccss class=md-nav__link> <span class=md-ellipsis> Running with Multiple Compute Command Streamers (CCSs) </span> </a> </li> <li class=md-nav__item> <a href=#running-multiple-mpi-applications-on-a-node class=md-nav__link> <span class=md-ellipsis> Running Multiple MPI Applications on a node </span> </a> </li> <li class=md-nav__item> <a href=#using-the-hbm-on-the-sapphire-rapids-cpus class=md-nav__link> <span class=md-ellipsis> Using the HBM on the Sapphire Rapids CPUs </span> </a> </li> <li class=md-nav__item> <a href=#compute-node-access-to-the-internet class=md-nav__link> <span class=md-ellipsis> Compute Node Access to the Internet </span> </a> </li> <li class=md-nav__item> <a href=#controlling-where-your-job-runs class=md-nav__link> <span class=md-ellipsis> Controlling Where Your Job Runs </span> </a> </li> <li class=md-nav__item> <a href=#placement class=md-nav__link> <span class=md-ellipsis> Placement </span> </a> </li> <br> <li class=md-nav__item> <hr> <a href=https://github.com/argonne-lcf/user-guides/issues/new/choose class=md-nav__link> <span class=md-ellipsis> <strong>Does this doc need an update?<br>Open an Issue on GitHub</strong> </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_10> <label class=md-nav__link for=__nav_4_2_10 id=__nav_4_2_10_label tabindex=0> <span class=md-ellipsis> Data Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_10_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_10> <span class="md-nav__icon md-icon"></span> Data Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-management/copper/copper/ class=md-nav__link> <span class=md-ellipsis> Copper </span> </a> </li> <li class=md-nav__item> <a href=../data-management/daos/daos-overview/ class=md-nav__link> <span class=md-ellipsis> DAOS </span> </a> </li> <li class=md-nav__item> <a href=../data-management/lustre/flare/ class=md-nav__link> <span class=md-ellipsis> Lustre (Flare) </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_10_4> <label class=md-nav__link for=__nav_4_2_10_4 id=__nav_4_2_10_4_label tabindex=0> <span class=md-ellipsis> Moving data to Aurora </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_10_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_10_4> <span class="md-nav__icon md-icon"></span> Moving data to Aurora </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-management/moving_data_to_aurora/daos_datamover/ class=md-nav__link> <span class=md-ellipsis> DAOS Data Mover </span> </a> </li> <li class=md-nav__item> <a href=../data-management/moving_data_to_aurora/globus/ class=md-nav__link> <span class=md-ellipsis> Globus </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_11> <label class=md-nav__link for=__nav_4_2_11 id=__nav_4_2_11_label tabindex=0> <span class=md-ellipsis> Applications and Libraries </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_11> <span class="md-nav__icon md-icon"></span> Applications and Libraries </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_11_1> <label class=md-nav__link for=__nav_4_2_11_1 id=__nav_4_2_11_1_label tabindex=0> <span class=md-ellipsis> Libraries </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_11_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_11_1> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../applications-and-libraries/libraries/cabana-aurora/ class=md-nav__link> <span class=md-ellipsis> Cabana </span> </a> </li> <li class=md-nav__item> <a href=../applications-and-libraries/libraries/onedal/ class=md-nav__link> <span class=md-ellipsis> oneDAL </span> </a> </li> <li class=md-nav__item> <a href=../applications-and-libraries/libraries/spack-pe/ class=md-nav__link> <span class=md-ellipsis> Spack PE </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../containers/containers/ class=md-nav__link> <span class=md-ellipsis> Containers </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_13> <label class=md-nav__link for=__nav_4_2_13 id=__nav_4_2_13_label tabindex=0> <span class=md-ellipsis> Data Science </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_13_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_13> <span class="md-nav__icon md-icon"></span> Data Science </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-science/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../data-science/jupyter/ class=md-nav__link> <span class=md-ellipsis> Jupyter </span> </a> </li> <li class=md-nav__item> <a href=../data-science/profiling_dl/ class=md-nav__link> <span class=md-ellipsis> Profiling </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_13_4> <label class=md-nav__link for=__nav_4_2_13_4 id=__nav_4_2_13_4_label tabindex=0> <span class=md-ellipsis> Frameworks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_13_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_13_4> <span class="md-nav__icon md-icon"></span> Frameworks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-science/frameworks/deepspeed/ class=md-nav__link> <span class=md-ellipsis> DeepSpeed </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/megatron-deepspeed/ class=md-nav__link> <span class=md-ellipsis> Megatron-DeepSpeed </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/pytorch/ class=md-nav__link> <span class=md-ellipsis> PyTorch </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/tensorflow/ class=md-nav__link> <span class=md-ellipsis> TensorFlow </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/dask/ class=md-nav__link> <span class=md-ellipsis> Dask </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/oneCCL/ class=md-nav__link> <span class=md-ellipsis> oneCCL </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/scikit-learn/ class=md-nav__link> <span class=md-ellipsis> scikit-learn </span> </a> </li> <li class=md-nav__item> <a href=../applications-and-libraries/libraries/onedal/ class=md-nav__link> <span class=md-ellipsis> oneDAL </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/gpytorch/ class=md-nav__link> <span class=md-ellipsis> GPyTorch </span> </a> </li> <li class=md-nav__item> <a href=../data-science/frameworks/pyg/ class=md-nav__link> <span class=md-ellipsis> PyTorch Geometric (PyG) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_13_5> <label class=md-nav__link for=__nav_4_2_13_5 id=__nav_4_2_13_5_label tabindex=0> <span class=md-ellipsis> AI Inference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_13_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_13_5> <span class="md-nav__icon md-icon"></span> AI Inference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-science/inference/libtorch/ class=md-nav__link> <span class=md-ellipsis> LibTorch </span> </a> </li> <li class=md-nav__item> <a href=../data-science/inference/openvino/ class=md-nav__link> <span class=md-ellipsis> OpenVINO </span> </a> </li> <li class=md-nav__item> <a href=../data-science/inference/vllm/ class=md-nav__link> <span class=md-ellipsis> vLLM </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_14> <label class=md-nav__link for=__nav_4_2_14 id=__nav_4_2_14_label tabindex=0> <span class=md-ellipsis> Programming Models </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_14_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_14> <span class="md-nav__icon md-icon"></span> Programming Models </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../programming-models/kokkos-aurora/ class=md-nav__link> <span class=md-ellipsis> Kokkos </span> </a> </li> <li class=md-nav__item> <a href=../programming-models/level-0/ class=md-nav__link> <span class=md-ellipsis> Level Zero </span> </a> </li> <li class=md-nav__item> <a href=../programming-models/opencl-aurora/ class=md-nav__link> <span class=md-ellipsis> OpenCL </span> </a> </li> <li class=md-nav__item> <a href=../programming-models/openmp-aurora/ class=md-nav__link> <span class=md-ellipsis> OpenMP </span> </a> </li> <li class=md-nav__item> <a href=../programming-models/sycl-aurora/ class=md-nav__link> <span class=md-ellipsis> SYCL </span> </a> </li> <li class=md-nav__item> <a href=../programming-models/hip-aurora/ class=md-nav__link> <span class=md-ellipsis> HIP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_15> <div class="md-nav__link md-nav__container"> <a href=../debugging/ class="md-nav__link "> <span class=md-ellipsis> Debugging Tools </span> </a> <label class="md-nav__link " for=__nav_4_2_15 id=__nav_4_2_15_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_15_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_15> <span class="md-nav__icon md-icon"></span> Debugging Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../debugging/gdb-oneapi/ class=md-nav__link> <span class=md-ellipsis> gdb-oneapi </span> </a> </li> <li class=md-nav__item> <a href=../debugging/ddt-aurora/ class=md-nav__link> <span class=md-ellipsis> DDT </span> </a> </li> <li class=md-nav__item> <a href=../debugging/gdb4hpc/ class=md-nav__link> <span class=md-ellipsis> gdb4hpc </span> </a> </li> <li class=md-nav__item> <a href=../debugging/codee/ class=md-nav__link> <span class=md-ellipsis> Codee </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_16> <div class="md-nav__link md-nav__container"> <a href=../performance-tools/ class="md-nav__link "> <span class=md-ellipsis> Performance Tools </span> </a> <label class="md-nav__link " for=__nav_4_2_16 id=__nav_4_2_16_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_16_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_16> <span class="md-nav__icon md-icon"></span> Performance Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../performance-tools/iprof/ class=md-nav__link> <span class=md-ellipsis> iprof </span> </a> </li> <li class=md-nav__item> <a href=../performance-tools/unitrace/ class=md-nav__link> <span class=md-ellipsis> unitrace </span> </a> </li> <li class=md-nav__item> <a href=../performance-tools/xpu-smi/ class=md-nav__link> <span class=md-ellipsis> xpu-smi </span> </a> </li> <li class=md-nav__item> <a href=../performance-tools/aps/ class=md-nav__link> <span class=md-ellipsis> APS </span> </a> </li> <li class=md-nav__item> <a href=../performance-tools/advisor/ class=md-nav__link> <span class=md-ellipsis> Advisor </span> </a> </li> <li class=md-nav__item> <a href=../performance-tools/vtune/ class=md-nav__link> <span class=md-ellipsis> VTune </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_17> <label class=md-nav__link for=__nav_4_2_17 id=__nav_4_2_17_label tabindex=0> <span class=md-ellipsis> Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_17_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_17> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../services/gitlab-ci/ class=md-nav__link> <span class=md-ellipsis> GitLab CI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_18> <div class="md-nav__link md-nav__container"> <a href=../visualization/ class="md-nav__link "> <span class=md-ellipsis> Visualization </span> </a> <label class="md-nav__link " for=__nav_4_2_18 id=__nav_4_2_18_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_18_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_18> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../visualization/paraview/ class=md-nav__link> <span class=md-ellipsis> ParaView (Launch from Client) </span> </a> </li> <li class=md-nav__item> <a href=../visualization/paraview-manual-launch/ class=md-nav__link> <span class=md-ellipsis> ParaView (Manual Launch) </span> </a> </li> <li class=md-nav__item> <a href=../visualization/visit/ class=md-nav__link> <span class=md-ellipsis> VisIt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_19> <label class=md-nav__link for=__nav_4_2_19 id=__nav_4_2_19_label tabindex=0> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_19_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_19> <span class="md-nav__icon md-icon"></span> Workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../workflows/adios/ class=md-nav__link> <span class=md-ellipsis> ADIOS2 </span> </a> </li> <li class=md-nav__item> <a href=../workflows/balsam/ class=md-nav__link> <span class=md-ellipsis> Balsam </span> </a> </li> <li class=md-nav__item> <a href=../workflows/libensemble/ class=md-nav__link> <span class=md-ellipsis> libEnsemble </span> </a> </li> <li class=md-nav__item> <a href=../workflows/parsl/ class=md-nav__link> <span class=md-ellipsis> Parsl </span> </a> </li> <li class=md-nav__item> <a href=../workflows/smartsim/ class=md-nav__link> <span class=md-ellipsis> SmartSim </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/ class="md-nav__link "> <span class=md-ellipsis> AI Testbed </span> </a> <label class="md-nav__link " for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> AI Testbed </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_2> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/cerebras/ class="md-nav__link "> <span class=md-ellipsis> Cerebras </span> </a> <label class="md-nav__link " for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Cerebras </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/running-a-model-or-program/ class=md-nav__link> <span class=md-ellipsis> Running a Model/Program </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/customizing-environment/ class=md-nav__link> <span class=md-ellipsis> Customizing Environments </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/job-queuing-and-submission/ class=md-nav__link> <span class=md-ellipsis> Job Queuing and Submission </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/example-programs/ class=md-nav__link> <span class=md-ellipsis> Example Programs </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/tunneling-and-forwarding-ports/ class=md-nav__link> <span class=md-ellipsis> Tunneling and Forwarding Ports </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/miscellaneous/ class=md-nav__link> <span class=md-ellipsis> Miscellaneous </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/cerebras/csl/ class=md-nav__link> <span class=md-ellipsis> CSL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_3> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/graphcore/ class="md-nav__link "> <span class=md-ellipsis> Graphcore </span> </a> <label class="md-nav__link " for=__nav_4_3_3 id=__nav_4_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Graphcore </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/virtual-environments/ class=md-nav__link> <span class=md-ellipsis> Virtual Environment </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/running-a-model-or-program/ class=md-nav__link> <span class=md-ellipsis> Running a Model/Program </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/job-queuing-and-submission/ class=md-nav__link> <span class=md-ellipsis> Job Queuing and Submission </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/example-programs/ class=md-nav__link> <span class=md-ellipsis> Example Programs </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/miscellaneous/ class=md-nav__link> <span class=md-ellipsis> Miscellaneous </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/graphcore/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_4> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/groq/ class="md-nav__link "> <span class=md-ellipsis> Groq </span> </a> <label class="md-nav__link " for=__nav_4_3_4 id=__nav_4_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> Groq </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-testbed/groq/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/groq/running-a-model-or-program/ class=md-nav__link> <span class=md-ellipsis> Running a Model/Program </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/groq/virtual-environments/ class=md-nav__link> <span class=md-ellipsis> Virtual Environments </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/groq/job-queuing-and-submission/ class=md-nav__link> <span class=md-ellipsis> Job Queueing and Submission </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/groq/groqview/ class=md-nav__link> <span class=md-ellipsis> Profiling with GroqView </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/groq/examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5 id=__nav_4_3_5_label tabindex=0> <span class=md-ellipsis> SambaNova </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> SambaNova </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_5_1> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/sambanova/ class="md-nav__link "> <span class=md-ellipsis> SN30 </span> </a> <label class="md-nav__link " for=__nav_4_3_5_1 id=__nav_4_3_5_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_3_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_5_1> <span class="md-nav__icon md-icon"></span> SN30 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/virtual-environment/ class=md-nav__link> <span class=md-ellipsis> Virtual Environment </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/running-a-model-or-program/ class=md-nav__link> <span class=md-ellipsis> Running a Model/Program </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/job-queuing-and-submission/ class=md-nav__link> <span class=md-ellipsis> Job Queuing and Submission </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/example-programs/ class=md-nav__link> <span class=md-ellipsis> Example Programs </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/example-multi-node-programs/ class=md-nav__link> <span class=md-ellipsis> Example Multi-Node Programs </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/example-modelzoo-programs/ class=md-nav__link> <span class=md-ellipsis> ModelZoo Samples </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/tunneling-and-forwarding-ports/ class=md-nav__link> <span class=md-ellipsis> Tunneling and Forwarding Ports </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/sambatune/ class=md-nav__link> <span class=md-ellipsis> SambaTune for profiling and performance tuning </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/miscellaneous/ class=md-nav__link> <span class=md-ellipsis> Miscellaneous </span> </a> </li> <li class=md-nav__item> <a href=../../ai-testbed/sambanova/documentation/ class=md-nav__link> <span class=md-ellipsis> SambaNova Documentation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_5_2> <div class="md-nav__link md-nav__container"> <a href=../../ai-testbed/sn40l_inference/ class="md-nav__link "> <span class=md-ellipsis> Metis Inference </span> </a> <label class="md-nav__link " for=__nav_4_3_5_2 id=__nav_4_3_5_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_5_2> <span class="md-nav__icon md-icon"></span> Metis Inference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-testbed/sn40l_inference/using_an_inference_endpoint/ class=md-nav__link> <span class=md-ellipsis> Using an Inference Endpoint </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ai-testbed/data-management/data-management-overview/ class=md-nav__link> <span class=md-ellipsis> Data Management </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__container"> <a href=../../crux/ class="md-nav__link "> <span class=md-ellipsis> Crux </span> </a> <label class="md-nav__link " for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Crux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../crux/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../crux/queueing-and-running-jobs/running-jobs/ class=md-nav__link> <span class=md-ellipsis> Running Jobs </span> </a> </li> <li class=md-nav__item> <a href=../../crux/compiling-and-linking/compiling-and-linking-overview/ class=md-nav__link> <span class=md-ellipsis> Compiling and Linking </span> </a> </li> <li class=md-nav__item> <a href=../../crux/containers/containers/ class=md-nav__link> <span class=md-ellipsis> Containers </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4_6> <label class=md-nav__link for=__nav_4_4_6 id=__nav_4_4_6_label tabindex=0> <span class=md-ellipsis> Data Science </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4_6> <span class="md-nav__icon md-icon"></span> Data Science </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../crux/data-science/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <div class="md-nav__link md-nav__container"> <a href=../../polaris/ class="md-nav__link "> <span class=md-ellipsis> Polaris </span> </a> <label class="md-nav__link " for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Polaris </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/known-issues/ class=md-nav__link> <span class=md-ellipsis> Known Issues </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/system-updates/ class=md-nav__link> <span class=md-ellipsis> System Updates </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5> <div class="md-nav__link md-nav__container"> <a href=../../polaris/compiling-and-linking/ class="md-nav__link "> <span class=md-ellipsis> Compiling and Linking </span> </a> <label class="md-nav__link " for=__nav_4_5_5 id=__nav_4_5_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Compiling and Linking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/polaris-programming-models/ class=md-nav__link> <span class=md-ellipsis> Programming Models </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/polaris-example-program-makefile/ class=md-nav__link> <span class=md-ellipsis> Example Program and Makefile </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/cce-compilers-polaris/ class=md-nav__link> <span class=md-ellipsis> CCE Compilers </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/gnu-compilers-polaris/ class=md-nav__link> <span class=md-ellipsis> GNU Compilers </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/nvidia-compiler-polaris/ class=md-nav__link> <span class=md-ellipsis> NVIDIA Compilers </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/llvm-compilers-polaris/ class=md-nav__link> <span class=md-ellipsis> LLVM Compilers </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/compiling-and-linking/oneapi-compiler/ class=md-nav__link> <span class=md-ellipsis> oneAPI Toolkit </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_6> <label class=md-nav__link for=__nav_4_5_6 id=__nav_4_5_6_label tabindex=0> <span class=md-ellipsis> Build Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_6> <span class="md-nav__icon md-icon"></span> Build Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/build-tools/cmake-polaris/ class=md-nav__link> <span class=md-ellipsis> CMake </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_7> <div class="md-nav__link md-nav__container"> <a href=../../polaris/running-jobs/ class="md-nav__link "> <span class=md-ellipsis> Running Jobs </span> </a> <label class="md-nav__link " for=__nav_4_5_7 id=__nav_4_5_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_7> <span class="md-nav__icon md-icon"></span> Running Jobs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/running-jobs/using-gpus/ class=md-nav__link> <span class=md-ellipsis> Using GPUs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_8> <label class=md-nav__link for=__nav_4_5_8 id=__nav_4_5_8_label tabindex=0> <span class=md-ellipsis> Applications and Libraries </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_8> <span class="md-nav__icon md-icon"></span> Applications and Libraries </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_8_1> <label class=md-nav__link for=__nav_4_5_8_1 id=__nav_4_5_8_1_label tabindex=0> <span class=md-ellipsis> Applications </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_8_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_8_1> <span class="md-nav__icon md-icon"></span> Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/amber/ class=md-nav__link> <span class=md-ellipsis> Amber </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/gromacs/ class=md-nav__link> <span class=md-ellipsis> GROMACS </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/lammps/ class=md-nav__link> <span class=md-ellipsis> LAMMPS </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/namd/ class=md-nav__link> <span class=md-ellipsis> NAMD </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/nekrs/ class=md-nav__link> <span class=md-ellipsis> NekRS </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/openmm/ class=md-nav__link> <span class=md-ellipsis> OpenMM </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/QMCPACK/ class=md-nav__link> <span class=md-ellipsis> QMCPACK </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/QuantumESPRESSO/ class=md-nav__link> <span class=md-ellipsis> Quantum ESPRESSO </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/applications/vasp/ class=md-nav__link> <span class=md-ellipsis> VASP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_8_2> <label class=md-nav__link for=__nav_4_5_8_2 id=__nav_4_5_8_2_label tabindex=0> <span class=md-ellipsis> Libraries </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_8_2> <span class="md-nav__icon md-icon"></span> Libraries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/libraries/math-libraries/ class=md-nav__link> <span class=md-ellipsis> Math Libraries </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/libraries/cabana-polaris/ class=md-nav__link> <span class=md-ellipsis> Cabana </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/libraries/spack-pe/ class=md-nav__link> <span class=md-ellipsis> Spack PE </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/libraries/nccl/ class=md-nav__link> <span class=md-ellipsis> NCCL </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/applications-and-libraries/libraries/xalt/ class=md-nav__link> <span class=md-ellipsis> XALT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../polaris/containers/containers/ class=md-nav__link> <span class=md-ellipsis> Containers </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_10> <label class=md-nav__link for=__nav_4_5_10 id=__nav_4_5_10_label tabindex=0> <span class=md-ellipsis> Data Science </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_10_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_10> <span class="md-nav__icon md-icon"></span> Data Science </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/data-science/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/profiling_dl/ class=md-nav__link> <span class=md-ellipsis> Profiling </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_10_3> <label class=md-nav__link for=__nav_4_5_10_3 id=__nav_4_5_10_3_label tabindex=0> <span class=md-ellipsis> Frameworks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_10_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_10_3> <span class="md-nav__icon md-icon"></span> Frameworks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/tensorflow/ class=md-nav__link> <span class=md-ellipsis> TensorFlow </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/pytorch/ class=md-nav__link> <span class=md-ellipsis> PyTorch </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/jax/ class=md-nav__link> <span class=md-ellipsis> JAX </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/deepspeed/ class=md-nav__link> <span class=md-ellipsis> DeepSpeed </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/libtorch/ class=md-nav__link> <span class=md-ellipsis> LibTorch </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/frameworks/gpytorch/ class=md-nav__link> <span class=md-ellipsis> GPyTorch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_10_4> <label class=md-nav__link for=__nav_4_5_10_4 id=__nav_4_5_10_4_label tabindex=0> <span class=md-ellipsis> Applications </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_10_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_10_4> <span class="md-nav__icon md-icon"></span> Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/data-science/applications/megatron-deepspeed/ class=md-nav__link> <span class=md-ellipsis> Megatron-DeepSpeed </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/data-science/applications/gpt-neox/ class=md-nav__link> <span class=md-ellipsis> gpt-neox </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_11> <label class=md-nav__link for=__nav_4_5_11 id=__nav_4_5_11_label tabindex=0> <span class=md-ellipsis> Programming Models </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_11> <span class="md-nav__icon md-icon"></span> Programming Models </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/programming-models/openmp-polaris/ class=md-nav__link> <span class=md-ellipsis> OpenMP </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/programming-models/sycl-polaris/ class=md-nav__link> <span class=md-ellipsis> SYCL </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/programming-models/kokkos-polaris/ class=md-nav__link> <span class=md-ellipsis> Kokkos </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/programming-models/julia/ class=md-nav__link> <span class=md-ellipsis> Julia </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_12> <label class=md-nav__link for=__nav_4_5_12 id=__nav_4_5_12_label tabindex=0> <span class=md-ellipsis> Debugging Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_12> <span class="md-nav__icon md-icon"></span> Debugging Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/debugging-tools/CUDA-GDB/ class=md-nav__link> <span class=md-ellipsis> CUDA-GDB </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_13> <label class=md-nav__link for=__nav_4_5_13 id=__nav_4_5_13_label tabindex=0> <span class=md-ellipsis> Performance Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_13_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_13> <span class="md-nav__icon md-icon"></span> Performance Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/performance-tools/NVIDIA-Nsight/ class=md-nav__link> <span class=md-ellipsis> NVIDIA-Nsight </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_14> <div class="md-nav__link md-nav__container"> <a href=../../polaris/visualization/ class="md-nav__link "> <span class=md-ellipsis> Visualization </span> </a> <label class="md-nav__link " for=__nav_4_5_14 id=__nav_4_5_14_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_14> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/visualization/paraview/ class=md-nav__link> <span class=md-ellipsis> ParaView (Launch from Client) </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/paraview-manual-launch/ class=md-nav__link> <span class=md-ellipsis> ParaView (Manual Launch) </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/visit/ class=md-nav__link> <span class=md-ellipsis> VisIt </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/ffmpeg/ class=md-nav__link> <span class=md-ellipsis> FFmpeg </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/imagemagick/ class=md-nav__link> <span class=md-ellipsis> ImageMagick </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/paraview-tutorial/ class=md-nav__link> <span class=md-ellipsis> ParaView Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/visualization/vnc/ class=md-nav__link> <span class=md-ellipsis> VNC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_15> <label class=md-nav__link for=__nav_4_5_15 id=__nav_4_5_15_label tabindex=0> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_15_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_15> <span class="md-nav__icon md-icon"></span> Workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../polaris/workflows/balsam/ class=md-nav__link> <span class=md-ellipsis> Balsam </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/workflows/dragon/ class=md-nav__link> <span class=md-ellipsis> Dragon </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/workflows/parsl/ class=md-nav__link> <span class=md-ellipsis> Parsl </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/workflows/libensemble/ class=md-nav__link> <span class=md-ellipsis> libEnsemble </span> </a> </li> <li class=md-nav__item> <a href=../../polaris/workflows/smartsim/ class=md-nav__link> <span class=md-ellipsis> SmartSim </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <div class="md-nav__link md-nav__container"> <a href=../../sophia/ class="md-nav__link "> <span class=md-ellipsis> Sophia </span> </a> <label class="md-nav__link " for=__nav_4_6 id=__nav_4_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Sophia </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sophia/getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../sophia/queueing-and-running-jobs/running-jobs/ class=md-nav__link> <span class=md-ellipsis> Running Jobs </span> </a> </li> <li class=md-nav__item> <a href=../../sophia/compiling-and-linking/compiling-and-linking-overview/ class=md-nav__link> <span class=md-ellipsis> Compiling and Linking </span> </a> </li> <li class=md-nav__item> <a href=../../sophia/containers/containers/ class=md-nav__link> <span class=md-ellipsis> Containers </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_6> <label class=md-nav__link for=__nav_4_6_6 id=__nav_4_6_6_label tabindex=0> <span class=md-ellipsis> Data Science </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_6> <span class="md-nav__icon md-icon"></span> Data Science </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sophia/data-science/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../sophia/data-science/fine-tune-LLM-with-Autotrain/ class=md-nav__link> <span class=md-ellipsis> Fine-tuning with Autotrain </span> </a> </li> <li class=md-nav__item> <a href=../../sophia/data-science/dask/ class=md-nav__link> <span class=md-ellipsis> Dask </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_7> <div class="md-nav__link md-nav__container"> <a href=../../sophia/visualization/ class="md-nav__link "> <span class=md-ellipsis> Visualization </span> </a> <label class="md-nav__link " for=__nav_4_6_7 id=__nav_4_6_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_7> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sophia/visualization/paraview/ class=md-nav__link> <span class=md-ellipsis> ParaView (Launch from Client) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../running-jobs/ class="md-nav__link "> <span class=md-ellipsis> Running Jobs with PBS </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Running Jobs with PBS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../running-jobs/example-job-scripts/ class=md-nav__link> <span class=md-ellipsis> Example Job Scripts </span> </a> </li> <li class=md-nav__item> <a href=../../running-jobs/machine-reservations/ class=md-nav__link> <span class=md-ellipsis> Machine Reservations </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../data-management/ class="md-nav__link "> <span class=md-ellipsis> Data Management </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Data Management </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <div class="md-nav__link md-nav__container"> <a href=../../data-management/filesystem-and-storage/ class="md-nav__link "> <span class=md-ellipsis> File System & Storage </span> </a> <label class="md-nav__link " for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> File System & Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data-management/filesystem-and-storage/hpss/ class=md-nav__link> <span class=md-ellipsis> HPSS </span> </a> </li> <li class=md-nav__item> <a href=../../data-management/filesystem-and-storage/disk-quota/ class=md-nav__link> <span class=md-ellipsis> Disk Quota </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <div class="md-nav__link md-nav__container"> <a href=../../data-management/acdc/ class="md-nav__link "> <span class=md-ellipsis> Transfer & Sharing </span> </a> <label class="md-nav__link " for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Transfer & Sharing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data-management/data-transfer/sftp-scp/ class=md-nav__link> <span class=md-ellipsis> SFTP and SCP </span> </a> </li> <li class=md-nav__item> <a href=../../data-management/data-transfer/using-globus/ class=md-nav__link> <span class=md-ellipsis> Using Globus </span> </a> </li> <li class=md-nav__item> <a href=../../data-management/acdc/eagle-data-sharing/ class=md-nav__link> <span class=md-ellipsis> Sharing on Eagle Using Globus </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../services/ class="md-nav__link "> <span class=md-ellipsis> Services </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../services/inference-endpoints/ class=md-nav__link> <span class=md-ellipsis> Inference Endpoints </span> </a> </li> <li class=md-nav__item> <a href=../../services/jupyter-hub/ class=md-nav__link> <span class=md-ellipsis> JupyterHub </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4 id=__nav_7_4_label tabindex=0> <span class=md-ellipsis> Continuous Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Continuous Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../services/continuous-integration/ class=md-nav__link> <span class=md-ellipsis> General </span> </a> </li> <li class=md-nav__item> <a href=../../services/gitlab-ci/ class=md-nav__link> <span class=md-ellipsis> GitLab CI </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../account-project-management/ class="md-nav__link "> <span class=md-ellipsis> Account & Project Management </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Account & Project Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../account-project-management/MyALCF/ class=md-nav__link> <span class=md-ellipsis> MyALCF </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_3> <div class="md-nav__link md-nav__container"> <a href=../../account-project-management/accounts-and-access/ class="md-nav__link "> <span class=md-ellipsis> Accounts and Access </span> </a> <label class="md-nav__link " for=__nav_8_3 id=__nav_8_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_3_label aria-expanded=false> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> Accounts and Access </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../account-project-management/accounts-and-access/obtaining-a-token/ class=md-nav__link> <span class=md-ellipsis> Obtaining a Token </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/accounts-and-access/logging-in-with-tokens/ class=md-nav__link> <span class=md-ellipsis> Logging in with a Token </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/accounts-and-access/troubleshooting-tokens/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting Tokens </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/accounts-and-access/accounts-and-access-faqs/ class=md-nav__link> <span class=md-ellipsis> Accounts and Access FAQs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4 id=__nav_8_4_label tabindex=0> <span class=md-ellipsis> Project Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_4_label aria-expanded=false> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> Project Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../account-project-management/project-management/starting-alcf-award/ class=md-nav__link> <span class=md-ellipsis> Starting Your ALCF Award </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/project-management/team-management/ class=md-nav__link> <span class=md-ellipsis> Managing Your Team Members </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/project-management/project-reports/ class=md-nav__link> <span class=md-ellipsis> Reporting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_5> <div class="md-nav__link md-nav__container"> <a href=../../account-project-management/allocation-management/ class="md-nav__link "> <span class=md-ellipsis> Allocations </span> </a> <label class="md-nav__link " for=__nav_8_5 id=__nav_8_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_5_label aria-expanded=false> <label class=md-nav__title for=__nav_8_5> <span class="md-nav__icon md-icon"></span> Allocations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../account-project-management/allocation-management/allocation-management/ class=md-nav__link> <span class=md-ellipsis> Managing Your Allocations </span> </a> </li> <li class=md-nav__item> <a href=../../account-project-management/allocation-management/sbank-allocation-accounting-system/ class=md-nav__link> <span class=md-ellipsis> sbank Allocation Accounting System </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../policies/ class="md-nav__link "> <span class=md-ellipsis> Facility Policies </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Facility Policies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../policies/alcf-acknowledgement-policy/ class=md-nav__link> <span class=md-ellipsis> ALCF Acknowledgement Policy </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_3> <div class="md-nav__link md-nav__container"> <a href=../../policies/accounts/ class="md-nav__link "> <span class=md-ellipsis> Account Policies </span> </a> <label class="md-nav__link " for=__nav_9_3 id=__nav_9_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_3_label aria-expanded=false> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> Account Policies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../policies/accounts/account-sponsorship-retention-policy/ class=md-nav__link> <span class=md-ellipsis> Account Sponsorship & Retention Policy </span> </a> </li> <li class=md-nav__item> <a href=../../policies/accounts/user-authentication-policy/ class=md-nav__link> <span class=md-ellipsis> User Authentication Policy </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_4> <div class="md-nav__link md-nav__container"> <a href=../../policies/queue-scheduling/ class="md-nav__link "> <span class=md-ellipsis> Scheduling Policies </span> </a> <label class="md-nav__link " for=__nav_9_4 id=__nav_9_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_4> <span class="md-nav__icon md-icon"></span> Scheduling Policies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../policies/queue-scheduling/refund-policy/ class=md-nav__link> <span class=md-ellipsis> Refund Policy </span> </a> </li> <li class=md-nav__item> <a href=../../policies/queue-scheduling/pullback-policy/ class=md-nav__link> <span class=md-ellipsis> Pullback Policy </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_5> <label class=md-nav__link for=__nav_9_5 id=__nav_9_5_label tabindex=0> <span class=md-ellipsis> Data and Software Policies </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_5_label aria-expanded=false> <label class=md-nav__title for=__nav_9_5> <span class="md-nav__icon md-icon"></span> Data and Software Policies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../policies/data-and-software-policies/data-policy/ class=md-nav__link> <span class=md-ellipsis> Data Policy </span> </a> </li> <li class=md-nav__item> <a href=../../policies/data-and-software-policies/software-policy/ class=md-nav__link> <span class=md-ellipsis> Software Policy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../acronyms/ class=md-nav__link> <span class=md-ellipsis> Acronyms </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Table of Contents --> <!-- --------------------------------------------------------------------- --> <nav class="md-nav md-nav--secondary" aria-label> <label class=md-nav__title for=__toc> Table of contents </label> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#queues class=md-nav__link> <span class=md-ellipsis> Queues </span> </a> <nav class=md-nav aria-label=Queues> <ul class=md-nav__list> <li class=md-nav__item> <a href=#submitting-a-job class=md-nav__link> <span class=md-ellipsis> Submitting a job </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#working-around-node-failures class=md-nav__link> <span class=md-ellipsis> Working around node failures </span> </a> <nav class=md-nav aria-label="Working around node failures"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#removing-known-bad-nodes class=md-nav__link> <span class=md-ellipsis> Removing "known" bad nodes </span> </a> </li> <li class=md-nav__item> <a href=#using-tolerate_node_failuresall class=md-nav__link> <span class=md-ellipsis> Using tolerate_node_failures=all </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aurora-mpich class=md-nav__link> <span class=md-ellipsis> Aurora MPICH </span> </a> </li> <li class=md-nav__item> <a href=#running-mpiopenmpsycl-applications class=md-nav__link> <span class=md-ellipsis> Running MPI+OpenMP+SYCL Applications </span> </a> </li> <li class=md-nav__item> <a href=#running-gpu-enabled-applications class=md-nav__link> <span class=md-ellipsis> Running GPU-enabled Applications </span> </a> </li> <li class=md-nav__item> <a href=#mpi-rank-and-thread-binding-to-cores-and-gpus class=md-nav__link> <span class=md-ellipsis> MPI rank and thread binding to cores and GPUs </span> </a> <nav class=md-nav aria-label="MPI rank and thread binding to cores and GPUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#binding-mpi-ranks-and-threads-to-cores class=md-nav__link> <span class=md-ellipsis> Binding MPI ranks and threads to cores </span> </a> <nav class=md-nav aria-label="Binding MPI ranks and threads to cores"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-2-nodes-4-ranksnode-1-threadrank class=md-nav__link> <span class=md-ellipsis> Example 1: 2 nodes, 4 ranks/node, 1 thread/rank </span> </a> </li> <li class=md-nav__item> <a href=#example-2-2-nodes-2-ranksnode-2-threadrank class=md-nav__link> <span class=md-ellipsis> Example 2: 2 nodes, 2 ranks/node, 2 thread/rank </span> </a> </li> <li class=md-nav__item> <a href=#example-3-2-nodes-2-ranksnode-1-threadrank-compact-fashion class=md-nav__link> <span class=md-ellipsis> Example 3: 2 nodes, 2 ranks/node, 1 thread/rank, compact fashion </span> </a> </li> <li class=md-nav__item> <a href=#example-4-1-node-12-ranksnode class=md-nav__link> <span class=md-ellipsis> Example 4: 1 node, 12 ranks/node </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#binding-mpi-ranks-to-gpus class=md-nav__link> <span class=md-ellipsis> Binding MPI ranks to GPUs </span> </a> <nav class=md-nav aria-label="Binding MPI ranks to GPUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-binding-mpi-ranks-to-gpus-using-gpu_tile_compactsh-and-gpu_dev_compactsh-scripts class=md-nav__link> <span class=md-ellipsis> 1) Binding MPI ranks to GPUs using gpu_tile_compact.sh and gpu_dev_compact.sh scripts </span> </a> <nav class=md-nav aria-label="1) Binding MPI ranks to GPUs using gpu_tile_compact.sh and gpu_dev_compact.sh scripts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile class=md-nav__link> <span class=md-ellipsis> Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile </span> </a> </li> <li class=md-nav__item> <a href=#example-2-implicit-scaling-1-node-6-ranksnode-1-threadrank-1-rankgpu class=md-nav__link> <span class=md-ellipsis> Example 2: (Implicit Scaling) 1 node, 6 ranks/node, 1 thread/rank, 1 rank/GPU </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-binding-mpi-ranks-to-gpus-using-gpu-bind-option-from-mpich class=md-nav__link> <span class=md-ellipsis> 2) Binding MPI ranks to GPUs using --gpu-bind option from MPICH </span> </a> <nav class=md-nav aria-label="2) Binding MPI ranks to GPUs using --gpu-bind option from MPICH"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile_1 class=md-nav__link> <span class=md-ellipsis> Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interactive-jobs-on-compute-nodes class=md-nav__link> <span class=md-ellipsis> Interactive Jobs on Compute Nodes </span> </a> </li> <li class=md-nav__item> <a href=#running-with-multiple-compute-command-streamers-ccss class=md-nav__link> <span class=md-ellipsis> Running with Multiple Compute Command Streamers (CCSs) </span> </a> </li> <li class=md-nav__item> <a href=#running-multiple-mpi-applications-on-a-node class=md-nav__link> <span class=md-ellipsis> Running Multiple MPI Applications on a node </span> </a> </li> <li class=md-nav__item> <a href=#using-the-hbm-on-the-sapphire-rapids-cpus class=md-nav__link> <span class=md-ellipsis> Using the HBM on the Sapphire Rapids CPUs </span> </a> </li> <li class=md-nav__item> <a href=#compute-node-access-to-the-internet class=md-nav__link> <span class=md-ellipsis> Compute Node Access to the Internet </span> </a> </li> <li class=md-nav__item> <a href=#controlling-where-your-job-runs class=md-nav__link> <span class=md-ellipsis> Controlling Where Your Job Runs </span> </a> </li> <li class=md-nav__item> <a href=#placement class=md-nav__link> <span class=md-ellipsis> Placement </span> </a> </li> <br> <li class=md-nav__item> <hr> <a href=https://github.com/argonne-lcf/user-guides/issues/new/choose class=md-nav__link> <span class=md-ellipsis> <strong>Does this doc need an update?<br>Open an Issue on GitHub</strong> </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/argonne-lcf/user-guides/edit/main/docs/aurora/running-jobs-aurora.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/argonne-lcf/user-guides/raw/main/docs/aurora/running-jobs-aurora.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=running-jobs-on-aurora>Running Jobs on Aurora<a class=headerlink href=#running-jobs-on-aurora title="Permanent link">&para;</a></h1> <h2 id=queues><a name=Aurora-Queues></a>Queues<a class=headerlink href=#queues title="Permanent link">&para;</a></h2> <p>There are four production queues you can target in your qsub (<code>-q &lt;queue name&gt;</code>):</p> <table> <thead> <tr> <th>Queue Name</th> <th>Node Min</th> <th>Node Max</th> <th>Time Min</th> <th>Time Max</th> <th>Notes</th> </tr> </thead> <tbody> <tr> <td>debug</td> <td>1</td> <td>2</td> <td>5 min</td> <td>1 hr</td> <td>64 nodes (non-exclusive); <br> Max 1 job running/accruing/queued <strong>per-user</strong></td> </tr> <tr> <td>debug-scaling</td> <td>2</td> <td>31</td> <td>5 min</td> <td>1 hr</td> <td>Max 1 job running/accruing/queued <strong>per-user</strong></td> </tr> <tr> <td>prod</td> <td>1</td> <td>10,624<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup></td> <td>5 min</td> <td>24 hrs</td> <td>Routing queue for tiny, small, medium, and large queues; <br> <strong>See table below for min/max limits</strong></td> </tr> <tr> <td>prod-large</td> <td>1920</td> <td>10,624<sup id=fnref2:1><a class=footnote-ref href=#fn:1>1</a></sup></td> <td>5 min</td> <td>24 hrs</td> <td>Routing queue for large jobs;</td> </tr> <tr> <td>visualization</td> <td>1</td> <td>32</td> <td>5 min</td> <td>8 hrs</td> <td><strong><em>By request only; non-exclusive nodes</em></strong></td> </tr> </tbody> </table> <p><code>prod</code> and <code>prod-large</code> are routing queues and routes your job to one of the following eight execution queues:</p> <table> <thead> <tr> <th>Queue Name</th> <th>Node Min</th> <th>Node Max</th> <th>Time Min</th> <th>Time Max</th> <th>Notes</th> </tr> </thead> <tbody> <tr> <td>tiny</td> <td>1</td> <td>512</td> <td>5 min</td> <td>6 hrs</td> <td></td> </tr> <tr> <td>small</td> <td>513</td> <td>1024</td> <td>5 min</td> <td>12 hrs</td> <td></td> </tr> <tr> <td>medium</td> <td>1025</td> <td>1919</td> <td>5 min</td> <td>18 hrs</td> <td></td> </tr> <tr> <td>large</td> <td>1920</td> <td>10,624<sup id=fnref3:1><a class=footnote-ref href=#fn:1>1</a></sup></td> <td>5 min</td> <td>24 hrs</td> <td></td> </tr> <tr> <td>backfill-tiny</td> <td>1</td> <td>512</td> <td>5 min</td> <td>6 hrs</td> <td>Low priority, negative project balance</td> </tr> <tr> <td>backfill-small</td> <td>513</td> <td>1024</td> <td>5 min</td> <td>12 hrs</td> <td>Low priority, negative project balance</td> </tr> <tr> <td>backfill-medium</td> <td>1025</td> <td>1919</td> <td>5 min</td> <td>18 hrs</td> <td>Low priority, negative project balance</td> </tr> <tr> <td>backfill-large</td> <td>1920</td> <td>10,624<sup id=fnref4:1><a class=footnote-ref href=#fn:1>1</a></sup></td> <td>5 min</td> <td>24 hrs</td> <td>Low priority, negative project balance; theoretical max; stable max nodecount may vary; see <a href=../../running-jobs/#pbsnodes-get-information-about-the-current-state-of-nodes>pbsnodes</a> and <a href=https://github.com/saforem2/pbs-tui>pbs-tui</a> for current nodecount.</td> </tr> </tbody> </table> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>You cannot submit to these queues directly; you can only submit to the routing queue <code>prod</code> or <code>prod-large</code>.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>All of these queues have a limit of ten (10) jobs running/accruing per-project. All of these queues have a limit of one hundred (100) jobs queued (not accruing score) per-project.</p> </div> <h3 id=submitting-a-job>Submitting a job<a class=headerlink href=#submitting-a-job title="Permanent link">&para;</a></h3> <p>Note: Jobs should be submitted only from your allocated project directory and not from your home directory or from <code>/soft/modulefiles</code>. Submitting an interactive job from <code>/soft/modulefiles</code> will result in your job ending abruptly.</p> <p>For example, a one-node interactive job requiring access to the <code>/flare</code> filesystem can be requested for 30 minutes with the following command, where <code>&lt;your_ProjectName&gt;</code> is replaced with an appropriate project name.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>qsub<span class=w> </span>-l<span class=w> </span><span class=k>select</span><span class=o>=</span><span class=m>1</span><span class=w> </span>-l<span class=w> </span><span class=nv>walltime</span><span class=o>=</span><span class=m>30</span>:00<span class=w> </span>-l<span class=w> </span><span class=nv>filesystems</span><span class=o>=</span>flare<span class=w> </span>-A<span class=w> </span>&lt;your_ProjectName&gt;<span class=w> </span>-q<span class=w> </span>debug<span class=w> </span>-I
</span></code></pre></div> <p>For DAOS access, users will need to include either <code>daos_user</code> or <code>daos_perf</code> (only for select teams approved by ALCF) as a filesystem option. More information can be found on the <a href=../data-management/daos/daos-overview/ >DAOS</a> page.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To view the available filesystem options, execute the <code>qstat -Bf</code> command and view the <code>resources_available.valid_filesystems</code> entry.</p> </div> <p>Recommended PBSPro options follow.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span>
<span class=normal><a href=#__codelineno-1-4>4</a></span>
<span class=normal><a href=#__codelineno-1-5>5</a></span>
<span class=normal><a href=#__codelineno-1-6>6</a></span>
<span class=normal><a href=#__codelineno-1-7>7</a></span>
<span class=normal><a href=#__codelineno-1-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=ch>#!/bin/bash -l</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=c1>#PBS -A &lt;your_ProjectName&gt;</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=c1>#PBS -N &lt;your_JobName&gt;</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=c1>#PBS -l walltime=&lt;requested_walltime_value&gt;</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=c1>#PBS -l filesystems=&lt;requested_fs1:requested_fs2&gt;</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=c1>#PBS -k doe</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><span class=c1>#PBS -l place=scatter</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><span class=c1>#PBS -q &lt;requested_Queue&gt;</span>
</span></code></pre></div></td></tr></table></div> <p>More information on the PBS options above, as well as other PBS options, can be found <a href=../../running-jobs/ >here</a>.</p> <h2 id=working-around-node-failures>Working around node failures<a class=headerlink href=#working-around-node-failures title="Permanent link">&para;</a></h2> <p>As Aurora is in early production stage, node failures are a fact of life. If you would like to increase the chances that a large job does not terminate due to a node failure, you may choose to interactively route your MPI job around nodes that fail during your run. To do this, you must run interactively and use must manually adjust your run on the fly to remove nodes that have been marked as failed.</p> <p>If you determine a node is bad, please send an email to <a href=mailto:support@alcf.anl.gov>support@alcf.anl.gov</a> with the node name, reason why you believe it is bad, and a reproducer if one is available.</p> <h3 id=removing-known-bad-nodes>Removing "known" bad nodes<a class=headerlink href=#removing-known-bad-nodes title="Permanent link">&para;</a></h3> <p>If you're encountering the same problematic node(s) repeatedly in your allocations, you can add the following lines in your noninteractive PBS script to exclude them from the MPICH execution command:</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>cat<span class=w> </span><span class=nv>$PBS_NODEFILE</span><span class=w> </span>&gt;<span class=w> </span>local.hostfile
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=c1># edit local.hostfile with sed/awk/etc. to remove problem node IDs</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a>mpiexec<span class=w> </span>--hostfile<span class=w> </span>local.hostfile<span class=w> </span>&lt;other<span class=w> </span>mpiexec<span class=w> </span>arguments&gt;
</span></code></pre></div></td></tr></table></div> <h3 id=using-tolerate_node_failuresall>Using <code>tolerate_node_failures=all</code><a class=headerlink href=#using-tolerate_node_failuresall title="Permanent link">&para;</a></h3> <p>We recommend against using <code>-W tolerate_node_failures=all</code> in your qsub command, but we acknowledge its use can be helpful. However, you MUST MANUALLY VERIFY your job and remove faulted nodes from your mpiexec command YOURSELF!</p> <ol> <li>Start your interactive job</li> <li>When the job transitions to Running state, run <code>pbsnodes -l | grep &lt;jobid&gt;</code></li> <li> <p>Manually REMOVE all nodes identified in that output from inclusion in your mpiexec</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a>cat<span class=w> </span><span class=nv>$PBS_NODEFILE</span><span class=w> </span>&gt;<span class=w> </span>local.hostfile
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=c1># edit local.hostfile to remove problem nodes</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a>mpiexec<span class=w> </span>--hostfile<span class=w> </span>local.hostfile<span class=w> </span>&lt;other<span class=w> </span>mpiexec<span class=w> </span>arguments&gt;
</span></code></pre></div></td></tr></table></div> </li> <li> <p>Continue to execute</p> </li> <li>If other nodes go down during your job, it will not be killed, and you can further exclude those nodes from your mpiexec as needed</li> </ol> <p>It is important to note that all nodes marked as faulty by PBS will not be used in subsequent jobs. This mechanism only provides you with a means to execute additional mpiexec commands under the same interactive job after manually removing nodes identified as faulty. Once your PBS job has exited, those faulty nodes will remain offline until further intervention by Aurora staff.</p> <p>See below section for more details on node <a href=#placement>Placement</a>.</p> <h2 id=aurora-mpich><a name=Aurora-MPICH></a>Aurora MPICH<a class=headerlink href=#aurora-mpich title="Permanent link">&para;</a></h2> <p>The standard version of the MPI (Message Passing Interface) library on Aurora is <em>Aurora MPICH</em>. This resulted from a collaboration between Intel and the Argonne MPICH developer team. The <code>mpiexec</code> and <code>mpirun</code> commands used to launch multi-rank jobs come from the Cray <abbr title="Parallel Application Launch Service (HPE Cray EX)">PALS</abbr> (Parallel Application Launch Service) system.</p> <p>There are many, many configuration and tuning parameters for Aurora MPICH. Simple ASCII text documentation of the environment variables usable to control behavior is in:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nv>$MPI_ROOT</span>/share/doc/mpich/README.envvar
</span></code></pre></div> <p>This includes, for example, settings to select different optional sub-algorithms used in MPI collective operations.</p> <h2 id=running-mpiopenmpsycl-applications><a name=Running-MPI+OpenMP+SYCL-Applications></a>Running MPI+OpenMP+SYCL Applications<a class=headerlink href=#running-mpiopenmpsycl-applications title="Permanent link">&para;</a></h2> <p>A simple MPI+OpenMP+SYCL code snippet (hello_affinity_aurora.out) will be used to clarify the mappings between MPI ranks, CPU logical processors, OpenMP threads, GPU visiblity and GPU-affinity mappings.</p> <div class="language-c++ highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>  1</a></span>
<span class=normal><a href=#__codelineno-5-2>  2</a></span>
<span class=normal><a href=#__codelineno-5-3>  3</a></span>
<span class=normal><a href=#__codelineno-5-4>  4</a></span>
<span class=normal><a href=#__codelineno-5-5>  5</a></span>
<span class=normal><a href=#__codelineno-5-6>  6</a></span>
<span class=normal><a href=#__codelineno-5-7>  7</a></span>
<span class=normal><a href=#__codelineno-5-8>  8</a></span>
<span class=normal><a href=#__codelineno-5-9>  9</a></span>
<span class=normal><a href=#__codelineno-5-10> 10</a></span>
<span class=normal><a href=#__codelineno-5-11> 11</a></span>
<span class=normal><a href=#__codelineno-5-12> 12</a></span>
<span class=normal><a href=#__codelineno-5-13> 13</a></span>
<span class=normal><a href=#__codelineno-5-14> 14</a></span>
<span class=normal><a href=#__codelineno-5-15> 15</a></span>
<span class=normal><a href=#__codelineno-5-16> 16</a></span>
<span class=normal><a href=#__codelineno-5-17> 17</a></span>
<span class=normal><a href=#__codelineno-5-18> 18</a></span>
<span class=normal><a href=#__codelineno-5-19> 19</a></span>
<span class=normal><a href=#__codelineno-5-20> 20</a></span>
<span class=normal><a href=#__codelineno-5-21> 21</a></span>
<span class=normal><a href=#__codelineno-5-22> 22</a></span>
<span class=normal><a href=#__codelineno-5-23> 23</a></span>
<span class=normal><a href=#__codelineno-5-24> 24</a></span>
<span class=normal><a href=#__codelineno-5-25> 25</a></span>
<span class=normal><a href=#__codelineno-5-26> 26</a></span>
<span class=normal><a href=#__codelineno-5-27> 27</a></span>
<span class=normal><a href=#__codelineno-5-28> 28</a></span>
<span class=normal><a href=#__codelineno-5-29> 29</a></span>
<span class=normal><a href=#__codelineno-5-30> 30</a></span>
<span class=normal><a href=#__codelineno-5-31> 31</a></span>
<span class=normal><a href=#__codelineno-5-32> 32</a></span>
<span class=normal><a href=#__codelineno-5-33> 33</a></span>
<span class=normal><a href=#__codelineno-5-34> 34</a></span>
<span class=normal><a href=#__codelineno-5-35> 35</a></span>
<span class=normal><a href=#__codelineno-5-36> 36</a></span>
<span class=normal><a href=#__codelineno-5-37> 37</a></span>
<span class=normal><a href=#__codelineno-5-38> 38</a></span>
<span class=normal><a href=#__codelineno-5-39> 39</a></span>
<span class=normal><a href=#__codelineno-5-40> 40</a></span>
<span class=normal><a href=#__codelineno-5-41> 41</a></span>
<span class=normal><a href=#__codelineno-5-42> 42</a></span>
<span class=normal><a href=#__codelineno-5-43> 43</a></span>
<span class=normal><a href=#__codelineno-5-44> 44</a></span>
<span class=normal><a href=#__codelineno-5-45> 45</a></span>
<span class=normal><a href=#__codelineno-5-46> 46</a></span>
<span class=normal><a href=#__codelineno-5-47> 47</a></span>
<span class=normal><a href=#__codelineno-5-48> 48</a></span>
<span class=normal><a href=#__codelineno-5-49> 49</a></span>
<span class=normal><a href=#__codelineno-5-50> 50</a></span>
<span class=normal><a href=#__codelineno-5-51> 51</a></span>
<span class=normal><a href=#__codelineno-5-52> 52</a></span>
<span class=normal><a href=#__codelineno-5-53> 53</a></span>
<span class=normal><a href=#__codelineno-5-54> 54</a></span>
<span class=normal><a href=#__codelineno-5-55> 55</a></span>
<span class=normal><a href=#__codelineno-5-56> 56</a></span>
<span class=normal><a href=#__codelineno-5-57> 57</a></span>
<span class=normal><a href=#__codelineno-5-58> 58</a></span>
<span class=normal><a href=#__codelineno-5-59> 59</a></span>
<span class=normal><a href=#__codelineno-5-60> 60</a></span>
<span class=normal><a href=#__codelineno-5-61> 61</a></span>
<span class=normal><a href=#__codelineno-5-62> 62</a></span>
<span class=normal><a href=#__codelineno-5-63> 63</a></span>
<span class=normal><a href=#__codelineno-5-64> 64</a></span>
<span class=normal><a href=#__codelineno-5-65> 65</a></span>
<span class=normal><a href=#__codelineno-5-66> 66</a></span>
<span class=normal><a href=#__codelineno-5-67> 67</a></span>
<span class=normal><a href=#__codelineno-5-68> 68</a></span>
<span class=normal><a href=#__codelineno-5-69> 69</a></span>
<span class=normal><a href=#__codelineno-5-70> 70</a></span>
<span class=normal><a href=#__codelineno-5-71> 71</a></span>
<span class=normal><a href=#__codelineno-5-72> 72</a></span>
<span class=normal><a href=#__codelineno-5-73> 73</a></span>
<span class=normal><a href=#__codelineno-5-74> 74</a></span>
<span class=normal><a href=#__codelineno-5-75> 75</a></span>
<span class=normal><a href=#__codelineno-5-76> 76</a></span>
<span class=normal><a href=#__codelineno-5-77> 77</a></span>
<span class=normal><a href=#__codelineno-5-78> 78</a></span>
<span class=normal><a href=#__codelineno-5-79> 79</a></span>
<span class=normal><a href=#__codelineno-5-80> 80</a></span>
<span class=normal><a href=#__codelineno-5-81> 81</a></span>
<span class=normal><a href=#__codelineno-5-82> 82</a></span>
<span class=normal><a href=#__codelineno-5-83> 83</a></span>
<span class=normal><a href=#__codelineno-5-84> 84</a></span>
<span class=normal><a href=#__codelineno-5-85> 85</a></span>
<span class=normal><a href=#__codelineno-5-86> 86</a></span>
<span class=normal><a href=#__codelineno-5-87> 87</a></span>
<span class=normal><a href=#__codelineno-5-88> 88</a></span>
<span class=normal><a href=#__codelineno-5-89> 89</a></span>
<span class=normal><a href=#__codelineno-5-90> 90</a></span>
<span class=normal><a href=#__codelineno-5-91> 91</a></span>
<span class=normal><a href=#__codelineno-5-92> 92</a></span>
<span class=normal><a href=#__codelineno-5-93> 93</a></span>
<span class=normal><a href=#__codelineno-5-94> 94</a></span>
<span class=normal><a href=#__codelineno-5-95> 95</a></span>
<span class=normal><a href=#__codelineno-5-96> 96</a></span>
<span class=normal><a href=#__codelineno-5-97> 97</a></span>
<span class=normal><a href=#__codelineno-5-98> 98</a></span>
<span class=normal><a href=#__codelineno-5-99> 99</a></span>
<span class=normal><a href=#__codelineno-5-100>100</a></span>
<span class=normal><a href=#__codelineno-5-101>101</a></span>
<span class=normal><a href=#__codelineno-5-102>102</a></span>
<span class=normal><a href=#__codelineno-5-103>103</a></span>
<span class=normal><a href=#__codelineno-5-104>104</a></span>
<span class=normal><a href=#__codelineno-5-105>105</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iomanip&gt;</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string.h&gt;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;mpi.h&gt;</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;sched.h&gt;</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;sycl/sycl.hpp&gt;</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;sys/syscall.h&gt;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;omp.h&gt;</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;sched.h&gt;</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;unistd.h&gt;</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13></a>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14></a><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>get_cpu_affinity_range</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15></a><span class=w>  </span><span class=kt>cpu_set_t</span><span class=w> </span><span class=n>mask</span><span class=p>;</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16></a><span class=w>  </span><span class=n>CPU_ZERO</span><span class=p>(</span><span class=o>&amp;</span><span class=n>mask</span><span class=p>);</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17></a><span class=w>  </span><span class=kt>pid_t</span><span class=w> </span><span class=n>pid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>syscall</span><span class=p>(</span><span class=n>SYS_gettid</span><span class=p>);</span><span class=w> </span><span class=c1>// You could also use 0 for current process</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>sched_getaffinity</span><span class=p>(</span><span class=n>pid</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>mask</span><span class=p>),</span><span class=w> </span><span class=o>&amp;</span><span class=n>mask</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>-1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19></a><span class=w>    </span><span class=n>perror</span><span class=p>(</span><span class=s>&quot;sched_getaffinity&quot;</span><span class=p>);</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>;</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22></a>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>result</span><span class=p>;</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25></a><span class=w>  </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>CPU_SETSIZE</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>CPU_ISSET</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>mask</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27></a><span class=w>      </span><span class=kt>int</span><span class=w> </span><span class=n>start</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28></a><span class=w>      </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>CPU_SETSIZE</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>CPU_ISSET</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>mask</span><span class=p>))</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29></a><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>result</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=s>&quot;,&quot;</span><span class=p>;</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30></a><span class=w>      </span><span class=n>result</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=p>(</span><span class=n>start</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>to_string</span><span class=p>(</span><span class=n>start</span><span class=p>)</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31></a><span class=w>        </span><span class=o>:</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>to_string</span><span class=p>(</span><span class=n>start</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot;-&quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>to_string</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33></a><span class=w>    </span><span class=o>++</span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35></a>
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s>&quot;No CPUs found in affinity mask.&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>result</span><span class=p>;</span>
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37></a><span class=p>}</span>
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38></a>
</span><span id=__span-5-39><a id=__codelineno-5-39 name=__codelineno-5-39></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>argc</span><span class=p>,</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>argv</span><span class=p>[]){</span>
</span><span id=__span-5-40><a id=__codelineno-5-40 name=__codelineno-5-40></a>
</span><span id=__span-5-41><a id=__codelineno-5-41 name=__codelineno-5-41></a><span class=w>  </span><span class=n>MPI_Init</span><span class=p>(</span><span class=o>&amp;</span><span class=n>argc</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>argv</span><span class=p>);</span>
</span><span id=__span-5-42><a id=__codelineno-5-42 name=__codelineno-5-42></a>
</span><span id=__span-5-43><a id=__codelineno-5-43 name=__codelineno-5-43></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=p>;</span>
</span><span id=__span-5-44><a id=__codelineno-5-44 name=__codelineno-5-44></a><span class=w>  </span><span class=n>MPI_Comm_size</span><span class=p>(</span><span class=n>MPI_COMM_WORLD</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>size</span><span class=p>);</span>
</span><span id=__span-5-45><a id=__codelineno-5-45 name=__codelineno-5-45></a>
</span><span id=__span-5-46><a id=__codelineno-5-46 name=__codelineno-5-46></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>rank</span><span class=p>;</span>
</span><span id=__span-5-47><a id=__codelineno-5-47 name=__codelineno-5-47></a><span class=w>  </span><span class=n>MPI_Comm_rank</span><span class=p>(</span><span class=n>MPI_COMM_WORLD</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>rank</span><span class=p>);</span>
</span><span id=__span-5-48><a id=__codelineno-5-48 name=__codelineno-5-48></a>
</span><span id=__span-5-49><a id=__codelineno-5-49 name=__codelineno-5-49></a><span class=w>  </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=n>MPI_MAX_PROCESSOR_NAME</span><span class=p>];</span>
</span><span id=__span-5-50><a id=__codelineno-5-50 name=__codelineno-5-50></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>resultlength</span><span class=p>;</span>
</span><span id=__span-5-51><a id=__codelineno-5-51 name=__codelineno-5-51></a><span class=w>  </span><span class=n>MPI_Get_processor_name</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>resultlength</span><span class=p>);</span>
</span><span id=__span-5-52><a id=__codelineno-5-52 name=__codelineno-5-52></a>
</span><span id=__span-5-53><a id=__codelineno-5-53 name=__codelineno-5-53></a><span class=w>  </span><span class=c1>// If ZE_AFFINITY_MASK is set, capture visible GPUs</span>
</span><span id=__span-5-54><a id=__codelineno-5-54 name=__codelineno-5-54></a><span class=w>  </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>gpu_id_list</span><span class=p>;</span>
</span><span id=__span-5-55><a id=__codelineno-5-55 name=__codelineno-5-55></a><span class=w>  </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>ze_affinity_mask</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getenv</span><span class=p>(</span><span class=s>&quot;ZE_AFFINITY_MASK&quot;</span><span class=p>);</span>
</span><span id=__span-5-56><a id=__codelineno-5-56 name=__codelineno-5-56></a><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>ze_affinity_mask</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nb>NULL</span><span class=p>){</span>
</span><span id=__span-5-57><a id=__codelineno-5-57 name=__codelineno-5-57></a><span class=w>    </span><span class=n>gpu_id_list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;N/A&quot;</span><span class=p>;</span>
</span><span id=__span-5-58><a id=__codelineno-5-58 name=__codelineno-5-58></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-59><a id=__codelineno-5-59 name=__codelineno-5-59></a><span class=w>  </span><span class=k>else</span><span class=p>{</span>
</span><span id=__span-5-60><a id=__codelineno-5-60 name=__codelineno-5-60></a><span class=w>    </span><span class=n>gpu_id_list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ze_affinity_mask</span><span class=p>;</span>
</span><span id=__span-5-61><a id=__codelineno-5-61 name=__codelineno-5-61></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-62><a id=__codelineno-5-62 name=__codelineno-5-62></a>
</span><span id=__span-5-63><a id=__codelineno-5-63 name=__codelineno-5-63></a><span class=w>  </span><span class=c1>// Find how many GPUs L0 runtime says are available</span>
</span><span id=__span-5-64><a id=__codelineno-5-64 name=__codelineno-5-64></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>num_devices</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-65><a id=__codelineno-5-65 name=__codelineno-5-65></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>sycl</span><span class=o>::</span><span class=n>device</span><span class=o>&gt;</span><span class=w> </span><span class=n>sycl_all_devs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sycl</span><span class=o>::</span><span class=n>device</span><span class=o>::</span><span class=n>get_devices</span><span class=p>(</span><span class=n>sycl</span><span class=o>::</span><span class=n>info</span><span class=o>::</span><span class=n>device_type</span><span class=o>::</span><span class=n>gpu</span><span class=p>);</span>
</span><span id=__span-5-66><a id=__codelineno-5-66 name=__codelineno-5-66></a><span class=w>  </span><span class=n>num_devices</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sycl_all_devs</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-5-67><a id=__codelineno-5-67 name=__codelineno-5-67></a>
</span><span id=__span-5-68><a id=__codelineno-5-68 name=__codelineno-5-68></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>hwthread</span><span class=p>;</span>
</span><span id=__span-5-69><a id=__codelineno-5-69 name=__codelineno-5-69></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>thread_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-70><a id=__codelineno-5-70 name=__codelineno-5-70></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>busid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>;</span>
</span><span id=__span-5-71><a id=__codelineno-5-71 name=__codelineno-5-71></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>busid_list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>;</span>
</span><span id=__span-5-72><a id=__codelineno-5-72 name=__codelineno-5-72></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>rt_gpu_id_list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=p>;</span>
</span><span id=__span-5-73><a id=__codelineno-5-73 name=__codelineno-5-73></a>
</span><span id=__span-5-74><a id=__codelineno-5-74 name=__codelineno-5-74></a><span class=w>  </span><span class=c1>// Loop over the GPUs available to each MPI rank</span>
</span><span id=__span-5-75><a id=__codelineno-5-75 name=__codelineno-5-75></a><span class=w>  </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>&lt;</span><span class=n>num_devices</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-76><a id=__codelineno-5-76 name=__codelineno-5-76></a><span class=w>    </span><span class=c1>// Get the PCIBusId for each GPU and use it to query for UUID</span>
</span><span id=__span-5-77><a id=__codelineno-5-77 name=__codelineno-5-77></a><span class=w>    </span><span class=n>busid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sycl_all_devs</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>get_info</span><span class=o>&lt;</span><span class=n>sycl</span><span class=o>::</span><span class=n>ext</span><span class=o>::</span><span class=n>intel</span><span class=o>::</span><span class=n>info</span><span class=o>::</span><span class=n>device</span><span class=o>::</span><span class=n>pci_address</span><span class=o>&gt;</span><span class=p>();</span>
</span><span id=__span-5-78><a id=__codelineno-5-78 name=__codelineno-5-78></a>
</span><span id=__span-5-79><a id=__codelineno-5-79 name=__codelineno-5-79></a><span class=w>    </span><span class=c1>// Concatenate per-MPIrank GPU info into strings for print</span>
</span><span id=__span-5-80><a id=__codelineno-5-80 name=__codelineno-5-80></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=n>rt_gpu_id_list</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=s>&quot;,&quot;</span><span class=p>);</span>
</span><span id=__span-5-81><a id=__codelineno-5-81 name=__codelineno-5-81></a><span class=w>    </span><span class=n>rt_gpu_id_list</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>to_string</span><span class=p>(</span><span class=n>i</span><span class=p>));</span>
</span><span id=__span-5-82><a id=__codelineno-5-82 name=__codelineno-5-82></a>
</span><span id=__span-5-83><a id=__codelineno-5-83 name=__codelineno-5-83></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>temp_busid</span><span class=p>(</span><span class=n>busid</span><span class=p>);</span>
</span><span id=__span-5-84><a id=__codelineno-5-84 name=__codelineno-5-84></a>
</span><span id=__span-5-85><a id=__codelineno-5-85 name=__codelineno-5-85></a><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=n>busid_list</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=s>&quot;,&quot;</span><span class=p>);</span>
</span><span id=__span-5-86><a id=__codelineno-5-86 name=__codelineno-5-86></a><span class=w>    </span><span class=n>busid_list</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>temp_busid</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=mi>2</span><span class=p>));</span>
</span><span id=__span-5-87><a id=__codelineno-5-87 name=__codelineno-5-87></a>
</span><span id=__span-5-88><a id=__codelineno-5-88 name=__codelineno-5-88></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-89><a id=__codelineno-5-89 name=__codelineno-5-89></a>
</span><span id=__span-5-90><a id=__codelineno-5-90 name=__codelineno-5-90></a><span class=cp>#pragma omp parallel default(shared) private(hwthread, thread_id)</span>
</span><span id=__span-5-91><a id=__codelineno-5-91 name=__codelineno-5-91></a><span class=w>  </span><span class=p>{</span>
</span><span id=__span-5-92><a id=__codelineno-5-92 name=__codelineno-5-92></a><span class=cp>#pragma omp critical</span>
</span><span id=__span-5-93><a id=__codelineno-5-93 name=__codelineno-5-93></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-94><a id=__codelineno-5-94 name=__codelineno-5-94></a><span class=w>      </span><span class=n>thread_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>omp_get_thread_num</span><span class=p>();</span>
</span><span id=__span-5-95><a id=__codelineno-5-95 name=__codelineno-5-95></a><span class=w>      </span><span class=n>hwthread</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get_cpu_affinity_range</span><span class=p>();</span>
</span><span id=__span-5-96><a id=__codelineno-5-96 name=__codelineno-5-96></a><span class=w>      </span><span class=kt>int</span><span class=w> </span><span class=n>running_cpu</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sched_getcpu</span><span class=p>();</span><span class=w>  </span><span class=c1>// This gives current logical core ID</span>
</span><span id=__span-5-97><a id=__codelineno-5-97 name=__codelineno-5-97></a>
</span><span id=__span-5-98><a id=__codelineno-5-98 name=__codelineno-5-98></a><span class=w>      </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;MPI %03d - OMP %03d - HWT %s (Running on: %03d) - Node %s - RT_GPU_ID %s - GPU_ID %s - Bus_ID %s</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span>
</span><span id=__span-5-99><a id=__codelineno-5-99 name=__codelineno-5-99></a><span class=w>             </span><span class=n>rank</span><span class=p>,</span><span class=w> </span><span class=n>thread_id</span><span class=p>,</span><span class=w> </span><span class=n>hwthread</span><span class=p>.</span><span class=n>c_str</span><span class=p>(),</span><span class=w> </span><span class=n>running_cpu</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>rt_gpu_id_list</span><span class=p>.</span><span class=n>c_str</span><span class=p>(),</span><span class=w> </span><span class=n>gpu_id_list</span><span class=p>,</span><span class=w> </span><span class=n>busid_list</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
</span><span id=__span-5-100><a id=__codelineno-5-100 name=__codelineno-5-100></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-101><a id=__codelineno-5-101 name=__codelineno-5-101></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-102><a id=__codelineno-5-102 name=__codelineno-5-102></a>
</span><span id=__span-5-103><a id=__codelineno-5-103 name=__codelineno-5-103></a><span class=w>  </span><span class=n>MPI_Finalize</span><span class=p>();</span>
</span><span id=__span-5-104><a id=__codelineno-5-104 name=__codelineno-5-104></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-105><a id=__codelineno-5-105 name=__codelineno-5-105></a><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>The above code snippet can be compiled via: <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>mpicxx<span class=w> </span>-fsycl<span class=w> </span>-qopenmp<span class=w> </span>hello_affinity_aurora.cpp<span class=w> </span>-o<span class=w> </span>hello_affinity_aurora.out
</span></code></pre></div></p> <p>Once a submitted job is running calculations can be launched on the compute nodes using <code>mpiexec</code> to start an MPI application. Documentation is accessible via <code>man mpiexec</code> and some helpful options follow.</p> <ul> <li><code>-n</code> total number of MPI ranks</li> <li><code>-ppn</code> number of MPI ranks per node</li> <li><code>--cpu-bind</code> CPU binding for application</li> <li><code>--depth</code> number of cpus per rank (useful with <code>--cpu-bind</code>)</li> <li><code>--env</code> set environment variables (<code>--env OMP_NUM_THREADS=2</code>)</li> <li><code>--hostfile</code> indicate file with hostnames (the default is <code>--hostfile $PBS_NODEFILE</code>)</li> </ul> <p>A sample submission script with directives is below for a 4-node job with 28 MPI ranks on each node and 4 OpenMP threads per rank (1 per CPU core).</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1> 1</a></span>
<span class=normal><a href=#__codelineno-7-2> 2</a></span>
<span class=normal><a href=#__codelineno-7-3> 3</a></span>
<span class=normal><a href=#__codelineno-7-4> 4</a></span>
<span class=normal><a href=#__codelineno-7-5> 5</a></span>
<span class=normal><a href=#__codelineno-7-6> 6</a></span>
<span class=normal><a href=#__codelineno-7-7> 7</a></span>
<span class=normal><a href=#__codelineno-7-8> 8</a></span>
<span class=normal><a href=#__codelineno-7-9> 9</a></span>
<span class=normal><a href=#__codelineno-7-10>10</a></span>
<span class=normal><a href=#__codelineno-7-11>11</a></span>
<span class=normal><a href=#__codelineno-7-12>12</a></span>
<span class=normal><a href=#__codelineno-7-13>13</a></span>
<span class=normal><a href=#__codelineno-7-14>14</a></span>
<span class=normal><a href=#__codelineno-7-15>15</a></span>
<span class=normal><a href=#__codelineno-7-16>16</a></span>
<span class=normal><a href=#__codelineno-7-17>17</a></span>
<span class=normal><a href=#__codelineno-7-18>18</a></span>
<span class=normal><a href=#__codelineno-7-19>19</a></span>
<span class=normal><a href=#__codelineno-7-20>20</a></span>
<span class=normal><a href=#__codelineno-7-21>21</a></span>
<span class=normal><a href=#__codelineno-7-22>22</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=ch>#!/bin/bash -l</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=c1>#PBS -N AFFINITY</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><span class=c1>#PBS -l select=4</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><span class=c1>#PBS -l place=scatter</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><span class=c1>#PBS -l walltime=0:10:00</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><span class=c1>#PBS -l filesystems=&lt;fs1:fs2&gt;</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><span class=c1>#PBS -q debug-scaling</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><span class=c1>#PBS -A &lt;MYPROJECT&gt;</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><span class=nb>export</span><span class=w> </span><span class=nv>TZ</span><span class=o>=</span><span class=s1>&#39;/usr/share/zoneinfo/US/Central&#39;</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><span class=nb>cd</span><span class=w> </span><span class=si>${</span><span class=nv>PBS_O_WORKDIR</span><span class=si>}</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><span class=nv>NNODES</span><span class=o>=</span><span class=sb>`</span>wc<span class=w> </span>-l<span class=w> </span>&lt;<span class=w> </span><span class=nv>$PBS_NODEFILE</span><span class=sb>`</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><span class=nv>NRANKS</span><span class=o>=</span><span class=m>28</span><span class=w> </span><span class=c1># Number of MPI ranks to spawn per node</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><span class=nv>NDEPTH</span><span class=o>=</span><span class=m>4</span><span class=w> </span><span class=c1># Number of hardware threads per rank (i.e. spacing between MPI ranks)</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><span class=nv>NTHREADS</span><span class=o>=</span><span class=m>4</span><span class=w> </span><span class=c1># Number of software threads per rank to launch (i.e. OMP_NUM_THREADS)</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17></a>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18></a><span class=nv>NTOTRANKS</span><span class=o>=</span><span class=k>$((</span><span class=w> </span><span class=nv>NNODES</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nv>NRANKS</span><span class=w> </span><span class=k>))</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19></a>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;NUM_OF_NODES= </span><span class=si>${</span><span class=nv>NNODES</span><span class=si>}</span><span class=s2> TOTAL_NUM_RANKS= </span><span class=si>${</span><span class=nv>NTOTRANKS</span><span class=si>}</span><span class=s2> RANKS_PER_NODE= </span><span class=si>${</span><span class=nv>NRANKS</span><span class=si>}</span><span class=s2> THREADS_PER_RANK= </span><span class=si>${</span><span class=nv>NTHREADS</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21></a>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22></a>mpiexec<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>NTOTRANKS</span><span class=si>}</span><span class=w> </span>-ppn<span class=w> </span><span class=si>${</span><span class=nv>NRANKS</span><span class=si>}</span><span class=w> </span>--depth<span class=o>=</span><span class=si>${</span><span class=nv>NDEPTH</span><span class=si>}</span><span class=w> </span>--cpu-bind<span class=w> </span>depth<span class=w> </span>-env<span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=si>${</span><span class=nv>NTHREADS</span><span class=si>}</span><span class=w> </span>--env<span class=w> </span><span class=nv>OMP_PLACES</span><span class=o>=</span>cores<span class=w> </span>./hello_affinity_aurora.out
</span></code></pre></div></td></tr></table></div> <h2 id=running-gpu-enabled-applications><a name=Running-GPU-enabled-Applications></a>Running GPU-enabled Applications<a class=headerlink href=#running-gpu-enabled-applications title="Permanent link">&para;</a></h2> <p>GPU-enabled applications will similarly run on the compute nodes using the above templated PBS job-script.</p> <ul> <li>The environment variable <code>MPIR_CVAR_ENABLE_GPU=1</code> enables GPU-aware MPI support whereby the MPI library sends and receives data directly from GPU buffers. Default value is <code>MPIR_CVAR_ENABLE_GPU=1</code>. For applications that doesn't need support for GPU-aware MPI, it is beneficial to disable by setting <code>MPIR_CVAR_ENABLE_GPU=0</code>.</li> <li>If running on a specific GPU or subset of GPUs and/or tiles is desired, then the <code>ZE_AFFINITY_MASK</code> environment variable can be used. For example, if one only wanted an application to access the first two GPUs on a node, then setting <code>ZE_AFFINITY_MASK=0,1</code> could be used.</li> </ul> <h2 id=mpi-rank-and-thread-binding-to-cores-and-gpus>MPI rank and thread binding to cores and GPUs<a class=headerlink href=#mpi-rank-and-thread-binding-to-cores-and-gpus title="Permanent link">&para;</a></h2> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Since March 31, 2025, cores 0 (104) and 52 (156)--the first physical cores on each CPU socket—have been reserved for system services, and are no longer available for user applications.</p> </div> <p>Each node on Aurora has 2 sockets, each with 1 CPU and 3 PVC GPUs. Each CPU has 52 physical cores, with 2 logical processors (provided by Intel hyper threading) per physical core, for a total of 104 physical cores and 208 logical processors on the CPUs per Aurora node. Each GPU has two tiles on it, for a total of 6 GPUs and 12 GPU tiles on the GPUs per Aurora node. When a parallel job is run, the job must have some way of mapping MPI ranks or threads to each of the 208 logical processors and 6 GPUs or 12 GPU tiles. Mapping is typically done by an affinity mask, which assigns hardware resources to each MPI rank or thread to use.</p> <p>A visual representation of node in Aurora is shown below. Each socket is represented by a large blue bubble. Inside, each CPU is represented by a red bubble. Inside of CPU, the white boxes represent the physical cores, and the two grey squares in each tile represent the two logical processors. Each GPU is represented by a large white box, with two grey boxes inside to represent the two tiles. As mentioned in the warning above, the cores 0 and 52 are reserved for the OS, and so are crossed out in red.</p> <figure> <p><img alt="Aurore node" src=../images/aurora_node_simple.png width=1000> </p> <figcaption>Simplified representation of Aurora node </figcaption> </figure> <p>For the two CPUs, the numbers inside the boxes identify the specific logical processors in the core. That is, logical processor 0 and 104 are the 2 logical processors on the first physical core. Logical processors 1 and 105 are the 2 logical processors that share the second physical core. Since there are 208 logical processors, the numbers run from 0 to 207. For i from 0 to 51, logical processors i and i+104 share a physical core.</p> <p>For the six GPUs, the GPU number identifies the GPU, and the tile numbers identify the tile in the GPU, with tiles from 0 to 5 with each GPU have two tiles each $gpu.0 and $gpu.1.</p> <h3 id=binding-mpi-ranks-and-threads-to-cores>Binding MPI ranks and threads to cores<a class=headerlink href=#binding-mpi-ranks-and-threads-to-cores title="Permanent link">&para;</a></h3> <p>Using the <code>--cpu-bind</code> argument to mpiexec, MPI ranks and threads can be assigned to run on specific logical processors on the CPUs. For more information about the flags to <code>mpiexec</code>, see <a href=#Running-MPI+OpenMP+SYCL-Applications>Running MPI+OpenMP+SYCL Applications</a>. Four examples of using <code>mpiexec</code> are given below to show how the <code>cpu-bind=depth</code>, <code>cpu-bind=list</code>, <code>--depth</code> arguments affect where MPI ranks and OpenMP threads are mapped. The sample output provides the range of logical processors (or hardware threads) a given MPI rank is bound to via <code>HWT</code> and the logical processor ID which the thread is running on via <code>(Running on: )</code>.</p> <p>Note: In this section, we intentionally do not bind GPUs to specific MPI ranks. GPU binding logic is deferred to the next section. As a result, each MPI rank will have visibility to all GPUs available on the node as can be seen from the output of <code>hello_affinity_aurora.out</code> executable from the above code snippet <code>hello_affinity_aurora.cpp</code>. <code>RT_GPU_ID</code> refers to runtime GPU ID as seen by the MPI rank and/or OpenMP thread and/or SYCL runtime. <code>GPU_ID</code> refers to the GPU ID as recognized by <code>ZE_AFFINITY_MASK</code>.</p> <h4 id=example-1-2-nodes-4-ranksnode-1-threadrank>Example 1: 2 nodes, 4 ranks/node, 1 thread/rank<a class=headerlink href=#example-1-2-nodes-4-ranksnode-1-threadrank title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>8</span><span class=w> </span>-ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--depth<span class=w> </span><span class=m>1</span><span class=w> </span>--cpu-bind<span class=o>=</span>depth<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>MPI<span class=w> </span><span class=m>006</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>MPI<span class=w> </span><span class=m>007</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> <ul> <li>The <code>-n 8</code> argument says to use 8 MPI ranks in total and <code>-ppn 4</code> places 4 ranks per node.</li> <li>The <code>--depth 1</code> argument says to use 1 logical processor for each MPI rank.</li> <li>The <code>--cpu-bind depth</code> argument says to spread out the ranks in a round robin manner across the logical processors, first putting one rank on the first logical processor of one physical core, and then looping back to put a second one on the second logical processor. This is done such that there's N logical processors for each MPI rank, where N is the value from the --depth argument (so it's 1 in this case).</li> </ul> <p>The same can be achieved with the <code>--cpu-bind=list</code> argument that explicitly lists which logical processor to bind to per node. Each MPI rank is bound to the logical processors that are listed between <code>:</code>. So here, rank 0 is bound to to logical processor 1, rank 1 to logical processor 2, and so on on each node.</p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>8</span><span class=w> </span>-ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:1:2:3:4<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>MPI<span class=w> </span><span class=m>006</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>MPI<span class=w> </span><span class=m>007</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> The figure below shows the mapping, where the different colors are different MPI ranks.</p> <figure> <p><img alt=Example1 src=../images/example1.png width=700> </p> <figcaption>Example 1 Mapping </figcaption> </figure> <h4 id=example-2-2-nodes-2-ranksnode-2-threadrank>Example 2: 2 nodes, 2 ranks/node, 2 thread/rank<a class=headerlink href=#example-2-2-nodes-2-ranksnode-2-threadrank title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>$<span class=w> </span><span class=nv>OMP_PLACES</span><span class=o>=</span>threads<span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>2</span><span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>-ppn<span class=w> </span><span class=m>2</span><span class=w> </span>--depth<span class=o>=</span><span class=m>2</span><span class=w> </span>--cpu-bind<span class=o>=</span>depth<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> <ul> <li>The <code>-n 4</code> argument says to use 4 MPI ranks in total and <code>-ppn 2</code> places 2 ranks per node.</li> <li>The <code>--depth=2</code> argument says to use 2 logical processors for each MPI rank.</li> <li>The <code>--cpu-bind=depth</code> argument says to spread out the ranks in a round robin manner across the logical processors, first putting one rank on the first logical processor of one physical processor, and then looping back to put a second one on the second logical processor. This is done such that there's N logical processors for each MPI rank, where N is the value from the <code>--depth</code> argument (so it's 2 in this case).</li> <li><code>OMP_NUM_THREADS=2</code> launches two threads per MPI rank</li> <li><code>OMP_PLACES=threads</code> says to bind the OpenMP threads to logical processors</li> </ul> <p>This is the same as explictly using the <code>--cpu-bind=list</code> argument. Each MPI rank is bound to the logical processors that are listed between <code>:</code>. Between :, the logical processors to bind to are listed in a comma-separated manner. So here, rank 0 is bound to logical processors 1 and 2, rank 2 to logical processors 3 and 4. <code>OMP_PLACES=threads</code> then binds the specific threads to the logical processors in the list.</p> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>$<span class=w> </span><span class=nv>OMP_PLACES</span><span class=o>=</span>threads<span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>2</span><span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>-ppn<span class=w> </span><span class=m>2</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:1,2:3,4<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s0b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>2</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>002</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>3</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>003</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>4</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>004</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4707c0s1b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> The figure below shows the mapping, where the different colors are different MPI ranks.</p> <figure> <p><img alt=Example2 src=../images/example2.png width=700> </p> <figcaption>Example 2 Mapping </figcaption> </figure> <h4 id=example-3-2-nodes-2-ranksnode-1-threadrank-compact-fashion>Example 3: 2 nodes, 2 ranks/node, 1 thread/rank, compact fashion<a class=headerlink href=#example-3-2-nodes-2-ranksnode-1-threadrank-compact-fashion title="Permanent link">&para;</a></h4> <p><div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>-ppn<span class=w> </span><span class=m>2</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:1:105<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>105</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>105</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>001</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>105</span><span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>105</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s7b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> The <code>--cpu-bind=list</code> argument explicitly lists which logical processor to bind to per node. Here, rank 0 is bound to logical processor 0 and rank 1 is bound to logical processor 105, which share the same physical core. The figure below shows the mapping, where the different colors are different MPI ranks.</p> <figure> <p><img alt=Example3 src=../images/example3.png width=700> </p> <figcaption>Example 3 Mapping </figcaption> </figure> <h4 id=example-4-1-node-12-ranksnode>Example 4: 1 node, 12 ranks/node<a class=headerlink href=#example-4-1-node-12-ranksnode title="Permanent link">&para;</a></h4> <p>This setup is a common case for applications: 12 ranks/node, where each rank will offload to one of the 12 GPU tiles. Note that explicit list binding to logical processors is needed here to avoid binding a MPI rank to a logical core on different socket than the GPU it might be targetting (as would happen if cpu_bind=depth was used).</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-8:9-16:17-24:25-32:33-40:41-48:53-60:61-68:69-76:77-84:85-92:93-100&quot;</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>12</span><span class=w> </span>-ppn<span class=w> </span><span class=m>12</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span>-8<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>008</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>9</span>-16<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>016</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>17</span>-24<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>024</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>25</span>-32<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>032</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>33</span>-40<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>040</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>41</span>-48<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>048</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>MPI<span class=w> </span><span class=m>006</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>53</span>-60<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>060</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>MPI<span class=w> </span><span class=m>007</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>61</span>-68<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>068</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>MPI<span class=w> </span><span class=m>008</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>69</span>-76<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>076</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>MPI<span class=w> </span><span class=m>009</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>77</span>-84<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>084</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>MPI<span class=w> </span><span class=m>010</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>85</span>-92<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>092</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>MPI<span class=w> </span><span class=m>011</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>93</span>-100<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>100</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span>,1,2,3,4,5<span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span>N/A<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>,42,6c,18,42,6c
</span></code></pre></div> <ul> <li>The <code>--cpu-bind=list:</code> argument explicitly lists which logical processor to bind to per node. Here, rank 0 is bound to to processors 1-8, rank 1 to processors 9-16, etc.</li> </ul> <p>The figure below shows the mapping, where the different colors are different MPI ranks.</p> <figure> <p><img alt=Example4 src=../images/example4.png width=700> </p> <figcaption>Example 4 Mapping </figcaption> </figure> <p>The important point here is that with this explicit binding from <code>cpu-bind=list</code>, we are able to ensure socket 0 has 6 ranks and socket 1 has 6 ranks. Note how MPI rank 5 ends at logical processor 48, but MPI rank 6 begins with logical processor 53, so this involves leaving several cores empty. However, it allows the cores to be spread evenly across the two sockets. </p> <p>If instead we used <code>--cpu-bind=depth</code> as below, then the mapping is: <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>$ export OMP_NUM_THREADS=1
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>$ mpiexec -n 12 -ppn 12 --depth=8 --cpu-bind=depth ./hello_affinity_aurora.out | sort
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>MPI 000 - OMP 000 - HWT 1-8 (Running on: 008) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>MPI 001 - OMP 000 - HWT 9-16 (Running on: 016) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>MPI 002 - OMP 000 - HWT 17-24 (Running on: 024) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>MPI 003 - OMP 000 - HWT 25-32 (Running on: 032) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>MPI 004 - OMP 000 - HWT 33-40 (Running on: 040) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>MPI 005 - OMP 000 - HWT 41-48 (Running on: 048) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>MPI 006 - OMP 000 - HWT 49-51,53-57 (Running on: 057) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>MPI 007 - OMP 000 - HWT 58-65 (Running on: 065) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>MPI 008 - OMP 000 - HWT 66-73 (Running on: 073) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>MPI 009 - OMP 000 - HWT 74-81 (Running on: 081) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>MPI 010 - OMP 000 - HWT 82-89 (Running on: 089) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a>MPI 011 - OMP 000 - HWT 90-97 (Running on: 097) - Node x4407c6s2b0n0 - RT_GPU_ID 0,1,2,3,4,5 - GPU_ID N/A - Bus_ID 18,42,6c,18,42,6c
</span></code></pre></div></p> <p>A small misconfiguration of the <code>--depth</code> option for instance, using <code>--depth=8</code> can result in unexpectedly bad performance. Note that the threads of MPI rank 6 are bound on both socket 0 and socket 1, which potentially will lead to worse performance than using cpu-bind=list to explicitly spread out the ranks (as above), since the threads can migrate across sockets. This is shown in the image below. Note that the pink MPI rank (rank 6) is split between socket 0 and socket 1.</p> <figure> <p><img alt=Example4 src=../images/example4_bad.png width=700> </p> <figcaption>Example 4 Mapping Which Splits a MPI Rank Across Sockets </figcaption> </figure> <div class="admonition info"> <p class=admonition-title>Info</p> <p>For a script to help provide cpu-bindings, you can use <a href=https://github.com/argonne-lcf/pbs_utils/blob/main/get_cpu_bind_aurora>get_cpu_bind_aurora</a>. Please see <a href=https://github.com/argonne-lcf/pbs_utils/blob/main/doc/guide-get_cpu_bind_aurora.md>User Guide for Aurora CPU Binding Script</a> for documentation.</p> </div> <h3 id=binding-mpi-ranks-to-gpus><a name=Binding-MPI-ranks-to-GPUs></a>Binding MPI ranks to GPUs<a class=headerlink href=#binding-mpi-ranks-to-gpus title="Permanent link">&para;</a></h3> <p>In this section, the above mentioned MPI+OpenMP+SYCL affinity code will be used to show how to map MPI processes with GPUs. The CPU mapping part of this example is very similar to the examples used above, so the focus here will be on the GPU mapping part.</p> <p>In general, GPU mapping can be accomplished in two different ways: 1) with the <code>gpu_tile_compact.sh</code> and <code>gpu_dev_compact.sh</code> scripts and 2) with the <code>--gpu-bind</code> flag to mpiexec.</p> <h4 id=1-binding-mpi-ranks-to-gpus-using-gpu_tile_compactsh-and-gpu_dev_compactsh-scripts>1) Binding MPI ranks to GPUs using <code>gpu_tile_compact.sh</code> and <code>gpu_dev_compact.sh</code> scripts<a class=headerlink href=#1-binding-mpi-ranks-to-gpus-using-gpu_tile_compactsh-and-gpu_dev_compactsh-scripts title="Permanent link">&para;</a></h4> <p>Users are encouraged to use the <code>gpu_tile_compact.sh</code> script provided in the Aurora PE. This script binds each MPI rank to a single GPU tile ("Explicit Scaling") using a round-robin strategy. Note that <code>gpu_tile_compact.sh</code> requires the environment variable <code>ZE_FLAT_DEVICE_HIERARCHY=COMPOSITE</code>, which is set by default in the Aurora PE. The script can be placed just before the executable in an <code>mpiexec</code> command like so.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>mpiexec<span class=w> </span>-n<span class=w> </span><span class=si>${</span><span class=nv>NTOTRANKS</span><span class=si>}</span><span class=w> </span>--ppn<span class=w> </span><span class=si>${</span><span class=nv>NRANKS_PER_NODE</span><span class=si>}</span><span class=w> </span>--depth<span class=o>=</span><span class=si>${</span><span class=nv>NDEPTH</span><span class=si>}</span><span class=w> </span>--cpu-bind<span class=o>=</span>depth<span class=w> </span>gpu_tile_compact.sh<span class=w> </span>&lt;app&gt;<span class=w> </span>&lt;app_args&gt;
</span></code></pre></div> <p>Below is a simplified version of this script, illustrating how the <code>ZE_AFFINITY_MASK</code> is uniquely set for each MPI rank.</p> <p>A simple version of <code>gpu_tile_compact.sh</code> script is below to illustrate how <code>ZE_AFFINITY_MASK</code> is uniquely set for each MPI rank. <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1>1</a></span>
<span class=normal><a href=#__codelineno-16-2>2</a></span>
<span class=normal><a href=#__codelineno-16-3>3</a></span>
<span class=normal><a href=#__codelineno-16-4>4</a></span>
<span class=normal><a href=#__codelineno-16-5>5</a></span>
<span class=normal><a href=#__codelineno-16-6>6</a></span>
<span class=normal><a href=#__codelineno-16-7>7</a></span>
<span class=normal><a href=#__codelineno-16-8>8</a></span>
<span class=normal><a href=#__codelineno-16-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a><span class=ch>#!/bin/bash -l</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a><span class=nv>num_gpu</span><span class=o>=</span><span class=m>6</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a><span class=nv>num_tile</span><span class=o>=</span><span class=m>2</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a><span class=nv>gpu_id</span><span class=o>=</span><span class=k>$((</span><span class=w> </span><span class=o>(</span><span class=nv>PALS_LOCAL_RANKID</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nv>num_tile</span><span class=w> </span><span class=o>)</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=nv>num_gpu</span><span class=w> </span><span class=k>))</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a><span class=nv>tile_id</span><span class=o>=</span><span class=k>$((</span><span class=nv>PALS_LOCAL_RANKID</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=nv>num_tile</span><span class=k>))</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_ENABLE_PCI_ID_DEVICE_ORDER</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=nv>$gpu_id</span>.<span class=nv>$tile_id</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a><span class=c1>#echo “RANK= ${PMI_RANK} LOCAL_RANK= ${PMI_LOCAL_RANK} gpu= ${gpu}”</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a><span class=nb>exec</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$@</span><span class=s2>&quot;</span>
</span></code></pre></div></td></tr></table></div></p> <p>The <code>frameworks</code> module sets <code>ZE_FLAT_DEVICE_HIERARCHY=FLAT</code>, treating each tile as a device. Our current recommendation is to <strong>not</strong> use the <code>gpu_tile_compact.sh</code> script during the job submission while using the <code>frameworks</code> module. If you wish to bind MPI ranks to devices instead of tiles, this can be done the following way:</p> <p><div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1>1</a></span>
<span class=normal><a href=#__codelineno-17-2>2</a></span>
<span class=normal><a href=#__codelineno-17-3>3</a></span>
<span class=normal><a href=#__codelineno-17-4>4</a></span>
<span class=normal><a href=#__codelineno-17-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a><span class=ch>#!/bin/bash</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a><span class=nv>num_gpus</span><span class=o>=</span><span class=m>12</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><span class=nv>gpu_id</span><span class=o>=</span><span class=k>$((</span><span class=nv>PMIX_RANK</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=si>${</span><span class=nv>num_gpus</span><span class=si>}</span><span class=w> </span><span class=k>))</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=nv>$gpu_id</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><span class=nb>exec</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$@</span><span class=s2>&quot;</span>
</span></code></pre></div></td></tr></table></div> Caution: This will narrow the affinity mask down and generate PyTorch warnings. If you want to avoid that, don't use this binding script and do the binding manually inside your apps. More information on <code>ZE_FLAT_DEVICE_HIERARCHY</code> can be found in <a href=https://www.intel.com/content/www/us/en/developer/articles/technical/flattening-gpu-tile-hierarchy.html>Intel's online documentation</a>.</p> <p>If an application prefers to bind MPI ranks to entire GPU devices rather than individual tiles, the <code>gpu_dev_compact.sh</code> script (also available in your default path) can be used. Binding to a full device instead of a tile is refered to as "Implicit Scaling". Users with different MPI-GPU affinity needs, such as assigning multiple GPUs/tiles per MPI rank, are encouraged to modify a local copy of <code>gpu_tile_compact.sh</code> (<code>which gpu_tile_compact.sh</code> will show the location of the script) to suit their needs.</p> <h5 id=example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile>Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile<a class=headerlink href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile title="Permanent link">&para;</a></h5> <p>This example below shows a common mapping of MPI ranks to cores and GPUs.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-8:9-16:17-24:25-32:33-40:41-48:53-60:61-68:69-76:77-84:85-92:93-100&quot;</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>12</span><span class=w> </span>-ppn<span class=w> </span><span class=m>12</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>gpu_tile_compact.sh<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span>-8<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>008</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>0</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>9</span>-16<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>016</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>0</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>17</span>-24<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>024</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>1</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>25</span>-32<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>032</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>1</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>33</span>-40<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>040</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>2</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>41</span>-48<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>048</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>2</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>MPI<span class=w> </span><span class=m>006</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>53</span>-60<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>060</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>3</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>MPI<span class=w> </span><span class=m>007</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>61</span>-68<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>068</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>3</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>MPI<span class=w> </span><span class=m>008</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>69</span>-76<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>076</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>4</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a>MPI<span class=w> </span><span class=m>009</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>77</span>-84<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>084</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>4</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>MPI<span class=w> </span><span class=m>010</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>85</span>-92<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>092</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>5</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>MPI<span class=w> </span><span class=m>011</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>93</span>-100<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>100</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>5</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span></code></pre></div> <ul> <li>The <code>-n 12</code> argument says to use 12 MPI ranks in total and <code>-ppn 12</code> places 12 ranks per node.</li> <li>The <code>--cpu-bind=list</code> argument gives the mapping of MPI ranks to cores, as described in <a href=#binding-mpi-ranks-and-threads-to-cores>Binding MPI ranks and threads to cores</a>.</li> <li>The <code>gpu_tile_compact.sh</code> wrapper sets ZE_AFFINITY_MASK for each of the 12 ranks such that rank 0 maps to GPU 0:Tile 0, rank 1 maps to GPU 0:Tile 1, rank 2 maps to GPU 1:Tile 0 etc. in a round-robin compact fashion.</li> </ul> <figure> <p><img alt=Example5 src=../images/example5.png width=700> </p> <figcaption>Example 1 GPU Tile Mapping </figcaption> </figure> <h5 id=example-2-implicit-scaling-1-node-6-ranksnode-1-threadrank-1-rankgpu>Example 2: (Implicit Scaling) 1 node, 6 ranks/node, 1 thread/rank, 1 rank/GPU<a class=headerlink href=#example-2-implicit-scaling-1-node-6-ranksnode-1-threadrank-1-rankgpu title="Permanent link">&para;</a></h5> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-16:17-32:33-48:53-68:69-84:85-100&quot;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>6</span><span class=w> </span>-ppn<span class=w> </span><span class=m>6</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>gpu_dev_compact.sh<span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span>-16<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>016</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>17</span>-32<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>032</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>1</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>33</span>-48<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>048</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>2</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>53</span>-68<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>068</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>3</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>69</span>-84<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>084</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>4</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>85</span>-100<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>100</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>5</span><span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span></code></pre></div> <ul> <li>The <code>-n 6</code> argument says to use 6 MPI ranks in total and <code>-ppn 6</code> places 6 ranks per node.</li> <li>The <code>--cpu-bind=list</code> argument gives the mapping of MPI ranks to cores, as described in <a href=#binding-mpi-ranks-and-threads-to-cores>Binding MPI ranks and threads to cores</a>.</li> <li>The <code>gpu_dev_compact.sh</code> wrapper sets ZE_AFFINITY_MASK for each of the 6 ranks such that rank 0 maps to GPU 0, rank 1 maps to GPU 1 etc. in a round-robin compact fashion.</li> </ul> <figure> <p><img alt=Example5 src=../images/example6.png width=700> </p> <figcaption>Example 1 GPU Device Mapping </figcaption> </figure> <h4 id=2-binding-mpi-ranks-to-gpus-using-gpu-bind-option-from-mpich>2) Binding MPI ranks to GPUs using <code>--gpu-bind</code> option from MPICH<a class=headerlink href=#2-binding-mpi-ranks-to-gpus-using-gpu-bind-option-from-mpich title="Permanent link">&para;</a></h4> <p>Similar to the <code>--cpu-bind</code> option, which maps MPI ranks to specific CPU cores, the <code>--gpu-bind</code> option enables mapping MPI ranks to GPUs. While this feature is still under active development and has several limitations, a common use case is mapping 12 MPI ranks to the 12 GPU tiles available per node.</p> <h5 id=example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile_1>Example 1: (Explicit Scaling) 1 node, 12 ranks/node, 1 thread/rank, 1 rank/GPU-tile<a class=headerlink href=#example-1-explicit-scaling-1-node-12-ranksnode-1-threadrank-1-rankgpu-tile_1 title="Permanent link">&para;</a></h5> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-8:9-16:17-24:25-32:33-40:41-48:53-60:61-68:69-76:77-84:85-92:93-100&quot;</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>GPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--gpu-bind=list:0.0:0.1:1.0:1.1:2.0:2.1:3.0:3.1:4.0:4.1:5.0:5.1&quot;</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>12</span><span class=w> </span>-ppn<span class=w> </span><span class=m>12</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span><span class=si>${</span><span class=nv>GPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>MPI<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>1</span>-8<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>008</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>0</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>MPI<span class=w> </span><span class=m>001</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>9</span>-16<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>016</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>0</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>MPI<span class=w> </span><span class=m>002</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>17</span>-24<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>024</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>1</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>MPI<span class=w> </span><span class=m>003</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>25</span>-32<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>032</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>1</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>MPI<span class=w> </span><span class=m>004</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>33</span>-40<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>040</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>2</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>MPI<span class=w> </span><span class=m>005</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>41</span>-48<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>048</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>2</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>MPI<span class=w> </span><span class=m>006</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>53</span>-60<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>060</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>3</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>MPI<span class=w> </span><span class=m>007</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>61</span>-68<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>068</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>3</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>18</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>MPI<span class=w> </span><span class=m>008</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>69</span>-76<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>076</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>4</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>MPI<span class=w> </span><span class=m>009</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>77</span>-84<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>084</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>4</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span><span class=m>42</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>MPI<span class=w> </span><span class=m>010</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>85</span>-92<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>092</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>5</span>.0<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>MPI<span class=w> </span><span class=m>011</span><span class=w> </span>-<span class=w> </span>OMP<span class=w> </span><span class=m>000</span><span class=w> </span>-<span class=w> </span>HWT<span class=w> </span><span class=m>93</span>-100<span class=w> </span><span class=o>(</span>Running<span class=w> </span>on:<span class=w> </span><span class=m>100</span><span class=o>)</span><span class=w> </span>-<span class=w> </span>Node<span class=w> </span>x4407c6s2b0n0<span class=w> </span>-<span class=w> </span>RT_GPU_ID<span class=w> </span><span class=m>0</span><span class=w> </span>-<span class=w> </span>GPU_ID<span class=w> </span><span class=m>5</span>.1<span class=w> </span>-<span class=w> </span>Bus_ID<span class=w> </span>6c
</span></code></pre></div> <ul> <li>The <code>-n 12</code> argument says to use 12 MPI ranks in total and <code>-ppn 12</code> places 12 ranks per node.</li> <li>The <code>--cpu-bind=list</code> argument gives the mapping of MPI ranks to cores, as described in <a href=#binding-mpi-ranks-and-threads-to-cores>Binding MPI ranks and threads to cores</a>.</li> <li>The <code>--gpu-bind=list</code> argument gives the mapping of MPI ranks to GPU-tiles.</li> </ul> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>There are several limitations with using <code>--gpu-bind=list</code> namely (a) for implict-scaling via <code>--gpu-bind=list:0:1:2:3:4:5</code>, (b) With a different device-discovery hierarchy, <code>ZE_FLAT_DEVICE_HIERARCHY=FLAT</code>. This is mode preferred for AI/ML frameworks.</p> </div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-16:17-32:33-48:53-68:69-84:85-100&quot;</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>GPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--gpu-bind=list:0:1:2:3:4:5&quot;</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>6</span><span class=w> </span>-ppn<span class=w> </span><span class=m>6</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span><span class=si>${</span><span class=nv>GPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>launch<span class=w> </span>failed<span class=w> </span>on<span class=w> </span>x4520c2s0b0n0:<span class=w> </span>Failed<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>implicit<span class=w> </span>GPU<span class=w> </span>selection
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>$
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>$
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>ZE_FLAT_DEVICE_HIERARCHY</span><span class=o>=</span>FLAT
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>CPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--cpu-bind=list:1-8:9-16:17-24:25-32:33-40:41-48:53-60:61-68:69-76:77-84:85-92:93-100&quot;</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>GPU_BIND_SCHEME</span><span class=o>=</span><span class=s2>&quot;--gpu-bind=list:0:1:2:3:4:5:6:7:8:9:10:11&quot;</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>$<span class=w> </span>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>12</span><span class=w> </span>-ppn<span class=w> </span><span class=m>12</span><span class=w> </span><span class=si>${</span><span class=nv>CPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span><span class=si>${</span><span class=nv>GPU_BIND_SCHEME</span><span class=si>}</span><span class=w> </span>./hello_affinity_aurora.out<span class=w> </span><span class=p>|</span><span class=w> </span>sort
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>launch<span class=w> </span>failed<span class=w> </span>on<span class=w> </span>x4520c2s0b0n0:<span class=w> </span>Failed<span class=w> </span>to<span class=w> </span>parse<span class=w> </span>implicit<span class=w> </span>GPU<span class=w> </span>selection
</span></code></pre></div> <h2 id=interactive-jobs-on-compute-nodes><a name=Interactive-Jobs-on-Compute-Nodes></a>Interactive Jobs on Compute Nodes<a class=headerlink href=#interactive-jobs-on-compute-nodes title="Permanent link">&para;</a></h2> <p>Here is how to submit an interactive job to, for example, edit/build/test an application on Aurora compute nodes:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>qsub<span class=w> </span>-I<span class=w> </span>-l<span class=w> </span><span class=k>select</span><span class=o>=</span><span class=m>1</span>,walltime<span class=o>=</span><span class=m>1</span>:00:00,place<span class=o>=</span>scatter<span class=w> </span>-l<span class=w> </span><span class=nv>filesystems</span><span class=o>=</span>&lt;fs1:fs2&gt;<span class=w> </span>-A<span class=w> </span>&lt;MYPROJECT&gt;<span class=w> </span>-q<span class=w> </span>debug
</span></code></pre></div> <p>This command requests 1 node for a period of 1 hour in the <code>workq</code> queue. After waiting in the queue for a node to become available, a shell prompt on a compute node will appear. You may then start building applications and testing gpu affinity scripts on the compute node.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If you want to <code>ssh</code> or <code>scp</code> to one of your assigned compute nodes you will need to make sure your <code>$HOME</code> directory and your <code>$HOME/.ssh</code> directory permissions are both set to <code>700</code>.</p> </div> <h2 id=running-with-multiple-compute-command-streamers-ccss><a name=Running-with-Multiple-CCS></a>Running with Multiple Compute Command Streamers (CCSs)<a class=headerlink href=#running-with-multiple-compute-command-streamers-ccss title="Permanent link">&para;</a></h2> <p>The Intel PVC GPUs contain 4 Compute Command Streamers (CCSs) on each tile, which can be used to group Execution Units (EUs) into common pools. These pools can then be accessed by separate processes thereby allowing users to bind multiple processes to a single tile and enabling applications to run up to 48 MPI processes per node on the 6 PVC available. Enabling multiple CCSs on Aurora is similar to the <abbr title="Multi-Process Service (NVIDIA)">MPS</abbr> capabilities on NVIDIA GPUs. By default, all EUs are assigned to a single CCS, but EUs can be distributed equally into 2 or 4 groups by exposing 2 or 4 CCSs, respectively. This feature is enabled with the <code>ZEX_NUMBER_OF_CCS</code> environment variable, which takes a comma-separated list of device-mode pairs. For example, to enable 4 CCSs on all 6 PVC, execute <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=nb>export</span><span class=w> </span><span class=nv>ZEX_NUMBER_OF_CCS</span><span class=o>=</span><span class=m>0</span>:4,1:4,2:4,3:4,4:4,5:4
</span></code></pre></div></p> <div class="admonition info"> <p class=admonition-title>Additional notes when running with multiple CCSs</p> <ul> <li>Please be mindful of the device hierarchy selected. When running with <code>ZE_FLAT_DEVICE_HIERARCHY=COMPOSITE</code>, 6 PVC are exposed to the applications and the above command should be used, noting that <code>export ZEX_NUMBER_OF_CCS=0:4</code> exposes 4 CCSs on both tiles of GPU 0. When running with <code>ZE_FLAT_DEVICE_HIERARCHY=FLAT</code>, the 12 PVC tiles are exposed to the applications (tile-as-device), thus <code>export ZEX_NUMBER_OF_CCS=0:4</code> only refers to tile 0 of GPU 0. To expose multiple CCSs on all tiles, users should use <code>export ZEX_NUMBER_OF_CCS=0:4,1:4,2:4,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4</code>.</li> <li>Users should also be mindful of the CPU binding affinity guidelines described above, ensuring that MPI processes are bound to the correct socket and GPU pairs.</li> <li><code>ZE_AFFINITY_MASK</code> is read by the Level Zero driver prior to <code>ZEX_NUMBER_OF_CCS</code>, thus <code>ZEX_NUMBER_OF_CCS</code> should refer to the GPU IDs of the masked devices.</li> <li>Users can expose different number of CCSs on the different GPU and tiles, the desired CCS mode does not need to be uniform across the GPUs on a node.</li> </ul> </div> <p>More information can be found on Intel's <a href=https://www.intel.com/content/www/us/en/docs/oneapi/optimization-guide-gpu/2024-1/multi-tile-advanced-topics.html>documentation</a> and <a href=https://github.com/intel/compute-runtime/blob/master/level_zero/doc/experimental_extensions/MULTI_CCS_MODES.md>GitHub</a> pages.</p> <h2 id=running-multiple-mpi-applications-on-a-node><a name=Running-Multiple-MPI-Applications-on-a-node></a>Running Multiple MPI Applications on a node<a class=headerlink href=#running-multiple-mpi-applications-on-a-node title="Permanent link">&para;</a></h2> <p>Multiple applications can be run simultaneously on a node by launching several <code>mpiexec</code> commands and backgrounding them. For performance, it will likely be necessary to ensure that each application runs on a distinct set of CPU resources and/or targets specific GPUs and tiles. One can provide a list of CPUs using the <code>--cpu-bind</code> option, which when combined with <code>ZE_AFFINITY_MASK</code> provides a user with specifying exactly which CPU and GPU resources to run each application on. In the simple example below, twelve instances of the application are simultaneously running on a single node. In the first instance, the application is spawning MPI ranks 0-3 on CPU cores 0-3 and using GPU 0 tile 0.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-24-1> 1</a></span>
<span class=normal><a href=#__codelineno-24-2> 2</a></span>
<span class=normal><a href=#__codelineno-24-3> 3</a></span>
<span class=normal><a href=#__codelineno-24-4> 4</a></span>
<span class=normal><a href=#__codelineno-24-5> 5</a></span>
<span class=normal><a href=#__codelineno-24-6> 6</a></span>
<span class=normal><a href=#__codelineno-24-7> 7</a></span>
<span class=normal><a href=#__codelineno-24-8> 8</a></span>
<span class=normal><a href=#__codelineno-24-9> 9</a></span>
<span class=normal><a href=#__codelineno-24-10>10</a></span>
<span class=normal><a href=#__codelineno-24-11>11</a></span>
<span class=normal><a href=#__codelineno-24-12>12</a></span>
<span class=normal><a href=#__codelineno-24-13>13</a></span>
<span class=normal><a href=#__codelineno-24-14>14</a></span>
<span class=normal><a href=#__codelineno-24-15>15</a></span>
<span class=normal><a href=#__codelineno-24-16>16</a></span>
<span class=normal><a href=#__codelineno-24-17>17</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1></a><span class=nb>export</span><span class=w> </span><span class=nv>OMP_NUM_THREADS</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_ENABLE_PCI_ID_DEVICE_ORDER</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3></a>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=m>0</span>.0
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5></a>mpiexec<span class=w> </span>--np<span class=w> </span><span class=m>4</span><span class=w> </span>--ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:1:2:3:4<span class=w> </span>./hello_affinity<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6></a>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=m>0</span>.1
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8></a>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>--ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:5:6:7:8<span class=w> </span>./hello_affinity<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9></a>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=m>1</span>.0
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11></a>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>--ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:9:10:11:12<span class=w> </span>./hello_affinity<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12></a>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13></a>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14></a><span class=nb>export</span><span class=w> </span><span class=nv>ZE_AFFINITY_MASK</span><span class=o>=</span><span class=m>5</span>.1
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15></a>mpiexec<span class=w> </span>-n<span class=w> </span><span class=m>4</span><span class=w> </span>--ppn<span class=w> </span><span class=m>4</span><span class=w> </span>--cpu-bind<span class=o>=</span>list:40:41:42:43<span class=w> </span>./hello_affinity<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16></a>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17></a><span class=nb>wait</span>
</span></code></pre></div></td></tr></table></div> <p>Users will likely find it beneficial to launch processes across CPU cores in both sockets of a node.</p> <h2 id=using-the-hbm-on-the-sapphire-rapids-cpus>Using the <abbr title="High Bandwidth Memory">HBM</abbr> on the Sapphire Rapids CPUs<a class=headerlink href=#using-the-hbm-on-the-sapphire-rapids-cpus title="Permanent link">&para;</a></h2> <p>As mentioned about, each node on Aurora has 2 CPUs, each with 52 physical cores. Each CPU has 512 GB DDR memory and 64 GB <abbr title="High Bandwidth Memory">HBM</abbr> memory. Since the CPUs on Aurora are configured in "flat" mode, the DDR and <abbr title="High Bandwidth Memory">HBM</abbr> are treated as separate memory regions.</p> <p>This configuration can be seen from running <code>numactl -H</code> on an Aurora node:</p> <div class="language-output highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=go>available: 4 nodes (0-3)</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=go>node 0 cpus: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=go>node 0 size: 515524 MB</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=go>node 0 free: 497948 MB</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=go>node 1 cpus: 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=go>node 1 size: 514994 MB</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=go>node 1 free: 497013 MB</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=go>node 2 cpus:</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=go>node 2 size: 65536 MB</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=go>node 2 free: 65424 MB</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=go>node 3 cpus:</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=go>node 3 size: 65536 MB</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a><span class=go>node 3 free: 65433 MB</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a><span class=go>node distances:</span>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=go>node   0   1   2   3</span>
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a><span class=go>  0:  10  21  13  23</span>
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a><span class=go>  1:  21  10  23  13</span>
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a><span class=go>  2:  13  23  10  23</span>
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a><span class=go>  3:  23  13  23  10</span>
</span></code></pre></div> <p>Here we see that the first CPU on the node (hardware threads 0-51 and 104-155) are associated with 512 GB memory in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 0 (node 0), and the second CPU (hardware threads 52-103 and 156-207) are also associated with 512 GB memory in <code>NUMA node 1 (node 1)</code>. The 64 GB <abbr title="High Bandwidth Memory">HBM</abbr> for the first CPU is in <code>node 2</code> and the second is <code>node 3</code>. Note that the "nodes" listed here refer to a <abbr title="Non-Uniform Memory Access">NUMA</abbr> domain on one node and not a different physical node.</p> <p>To specify in which memory ranks allocate, you can use several methods:</p> <ol> <li> <p>Use the <a href=https://github.com/memkind/memkind>memkind library</a> with explicit calls like: <div class="language-c highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=nf>hbw_malloc</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>);</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=kt>void</span><span class=w> </span><span class=n>hbw_free</span><span class=p>(</span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>ptr</span><span class=p>)</span>
</span></code></pre></div> to allocate and free memory in <abbr title="High Bandwidth Memory">HBM</abbr>. By default, <code>malloc</code> will be in DDR.</p> </li> <li> <p>Use <code>numactl</code> to specify in which <abbr title="Non-Uniform Memory Access">NUMA</abbr> domain (based on <code>numactl -H</code> output) to allocate memory. For example, you can use <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>mpirun -n 2 --cpu-bind=list:1-51:53-103 numactl -m 2-3 ./app
</span></code></pre></div> This uses the <code>-m</code> flag to allocate memory only in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 2 and <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 3, which is the <abbr title="High Bandwidth Memory">HBM</abbr> associated with the first and second CPUs, respectively. Or you can use the <code>--preferred</code> flag to specify that you would prefer that the memory allocations begin on the <abbr title="High Bandwidth Memory">HBM</abbr>, but if memory cannot be allocated there fall back to the DDR. For example, to allocated first in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 2 and fall back to DDR if needed: <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>mpirun -n 1 --cpu-bind=list:1-51 numactl --preferred 2 ./app
</span></code></pre></div> Note that <code>--preferred</code> takes only one node number, so to set it differently for each MPI rank, a script similar to <code>gpu_tile_compact.sh</code> can be written that sets <code>numactl --preferred</code> based on the MPI rank.</p> </li> <li> <p>Use the <code>--mem-bind</code> flag for <code>mpirun</code> to restrict where the MPI ranks can allocate memory. For example, to allocate memory for rank 0 in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 0 (DDR) and rank 1 on <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 1 (DDR): <div class="language-text highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>mpirun -n 2 --cpu-bind=list:1-51:53-103 --mem-bind=list:0:1
</span></code></pre></div> To allocate memory for rank 0 in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 2 (<abbr title="High Bandwidth Memory">HBM</abbr>) and rank 1 in <abbr title="Non-Uniform Memory Access">NUMA</abbr> node 3 (<abbr title="High Bandwidth Memory">HBM</abbr>): <div class="language-text highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>mpirun -n 2 --cpu-bind=list:1-51:53-103 --mem-bind=list:2:3
</span></code></pre></div></p> </li> </ol> <h2 id=compute-node-access-to-the-internet><a name=Compute-Node-Access-to-the-Internet></a>Compute Node Access to the Internet<a class=headerlink href=#compute-node-access-to-the-internet title="Permanent link">&para;</a></h2> <p>Currently, the only access to the internet is via a proxy. Here are the proxy environment variables for Aurora:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=nb>export</span><span class=w> </span><span class=nv>http_proxy</span><span class=o>=</span><span class=s2>&quot;http://proxy.alcf.anl.gov:3128&quot;</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=nb>export</span><span class=w> </span><span class=nv>https_proxy</span><span class=o>=</span><span class=s2>&quot;http://proxy.alcf.anl.gov:3128&quot;</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=nb>export</span><span class=w> </span><span class=nv>ftp_proxy</span><span class=o>=</span><span class=s2>&quot;http://proxy.alcf.anl.gov:3128&quot;</span>
</span></code></pre></div> <p>In the future, though we don't have a timeline on this because it depends on future features in slingshot and internal software development, we intend to have public IP addresses be a schedulable resource. For instance, if only your head node needed public access your select statement might looks something like: <code>-l select=1:pubnet=True+63</code>.</p> <h2 id=controlling-where-your-job-runs><a name=Controlling-Where-Your-Job-Runs></a>Controlling Where Your Job Runs<a class=headerlink href=#controlling-where-your-job-runs title="Permanent link">&para;</a></h2> <p>If you wish to have your job run on specific nodes form your select like this: <code>-l select=1:vnode=&lt;node name1&gt;+1:vnode=&lt;node name2&gt;...</code> . Obviously, that gets tedious for large jobs.</p> <p>If you want to control the location of a few nodes, for example 2 out of 64, but the rest don't matter, you can do something like this: <code>-l select=1:vnode=&lt;node name1&gt;+1:vnode=&lt;node name2&gt;+62:system=foo</code>.</p> <!--
## <a name="Rack-and-Dragonfly-Group-Mappings"></a>Network: Rack and Dragonfly Group Mappings
Content coming soon.
--> <h2 id=placement>Placement<a class=headerlink href=#placement title="Permanent link">&para;</a></h2> <p>On Aurora, racks consist of 8 chassis, each of which holds 8 nodes, for a total of 64 nodes per rack. The chassis are in a 2-across by 4-high arrangement numbered 0-7, going left to right, bottom to top. Each chassis has switching built in that the nodes plug into, so if you have a job that is 8 nodes or less you can save switch hops if all the nodes are in the same chassis.</p> <figure> <p><img alt=test src=../images/AuroraChassisNumber.svg></p> <figcaption> <p>Figure: Liquid Cooled Cabinet Front and Chassis Numbering (Source: HPE Shasta Hardware Architecture <a href="https://support.hpe.com/hpesc/public/docDisplay?docId=a00115093en_us&page=Shasta_Hardware_Architecture.html">documentation</a></p> </figcaption> </figure> <!-- This is a very brief guide to translating the node xnames used in the ALCF.  This only addresses the nodes, but every component in the system has an xname that geo-locates it in the system.  For the nodes, an xname is of the form **xPQRRc#s#b#n#** where: --> <!-- x is always x --> <!-- P = system; single digit --> <!-- Q = row; single digit --> <!-- RR = rack; two digits --> <!-- c = chassis --> <!-- s = slot --> <!-- b = bmc (baseboard management controller) --> <!-- n = node --> <!-- # = single digit integers | --> <p>As an example, for node <code>x4109c0s0b0n0</code>, this can be decomposed as: <div class="language-text highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>x4109c0s0b0n0 == Rack Identifier x4109, Chassis c0, Slot s0, Board b0, Node n0
</span></code></pre></div> Note that the node names will always end in b0n0 (board 0, node 0) since there is only 1 board per blade, and 1 node per board.</p> <p>Every rack is a Dragonfly group, so if your job is 64 nodes or less you can save switch hops if all your nodes are in the same rack. Every node has a PBS resource called <code>tier0</code> with a rack identifier (like <code>x4519</code>) and <code>tier1</code> with a rack and chassis identifier (like <code>x4519c3</code>). PBS is configured so that it will preferentially place your jobs in the same chassis or rack if it can without delaying the start of your job. If you want to guarantee all your nodes are grouped in a rack, you can add the group specifier to the <code>place</code> statement in PBS:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a>qsub<span class=w> </span>-l<span class=w> </span><span class=k>select</span><span class=o>=</span><span class=m>8</span><span class=w> </span>-l<span class=w> </span><span class=nv>place</span><span class=o>=</span>scatter:group<span class=o>=</span>tier0<span class=w> </span>pbs_submit_script.sh<span class=w> </span><span class=c1># allocating 8 nodes all in one rack (Dragonfly group)</span>
</span></code></pre></div> <p>If you wanted everything in the same chassis, replace <code>tier0</code> with <code>tier1</code>. Note that you must explicitly specify the <code>place</code> when you use <code>group</code>. If you wanted a specific rack or Dragonfly group instead of any of them, you can use:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>qsub<span class=w> </span>-l<span class=w> </span><span class=k>select</span><span class=o>=</span><span class=m>10</span>:tier0<span class=o>=</span>x4519<span class=w> </span>-l<span class=w> </span><span class=nv>place</span><span class=o>=</span>scatter:group<span class=o>=</span>tier0<span class=w> </span>pbs_submit_script.sh<span class=w> </span><span class=c1># allocating 10 nodes in rack x4519</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>qsub<span class=w> </span>-l<span class=w> </span><span class=k>select</span><span class=o>=</span><span class=m>2</span>:tier1<span class=o>=</span>x4519c2<span class=w> </span>-l<span class=w> </span><span class=nv>place</span><span class=o>=</span>scatter:group<span class=o>=</span>tier1<span class=w> </span>pbs_submit_script.sh<span class=w> </span><span class=c1># allocating 2 nodes in rack x4519 chassis c2</span>
</span></code></pre></div> <p>Another example that requests 10 nodes (8 unspecified nodes + 2 specific compute nodes) would use: <div class="language-bash highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1>#PBS -l select=8:tier1=x4000c0+1:host=x4311c1s0b0n0+1:host=x4311c1s1b0n0</span>
</span></code></pre></div></p> <p>You can also easily check what tier a node is a member of before your job submission:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=go>&gt; pbsnodes x4000c0s0b0n0 | grep tier</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=go>resources_available.tier0 = x4000</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=go>resources_available.tier1 = x4000c0</span>
</span></code></pre></div> <p>To check if a specific node is available:</p> <div class="language-console highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=go>&gt; pbsnodes -Sv &lt;node&gt;</span>
</span></code></pre></div> <p>Another useful shell function for querying the compute node IDs and statuses available in a given <code>at_queue</code> (use <code>lustre_scaling</code>) and (optionally) matching status type <code>{free, job-exclusive, down}</code>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>pbsnodes_queue<span class=o>()</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>  </span><span class=nb>local</span><span class=w> </span><span class=nv>at_queue</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>1</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>  </span><span class=nb>local</span><span class=w> </span><span class=nv>state</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-z<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>state</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=o>]</span><span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>    </span>pbsnodes<span class=w> </span>-avF<span class=w> </span>JSON<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>--arg<span class=w> </span>queue<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>at_queue</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.nodes[] | select(.resources_available.at_queue|split(&quot;,&quot;)|.[]|contains($queue)) | [.resources_available.vnode,.state,.comment]|join(&quot;,&quot;)&#39;</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>  </span><span class=k>else</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=w>    </span>pbsnodes<span class=w> </span>-avF<span class=w> </span>JSON<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>--arg<span class=w> </span>queue<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>at_queue</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>--arg<span class=w> </span>state<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>state</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.nodes[] | select(.resources_available.at_queue|split(&quot;,&quot;)|.[]|contains($queue))|select(.state == $state) | [.resources_available.vnode,.state,.comment]|join(&quot;,&quot;)&#39;</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=w>  </span><span class=k>fi</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=o>}</span>
</span></code></pre></div> If this shell function is defined (e.g. in your local <code>~/.bashrc</code>), you can see the nodes that are currently <code>down</code> for example: <div class="language-console highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=go>❯ pbsnodes_queue lustre_scaling down</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=go>x4713c3s2b0n0,down,</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=go>x4013c0s7b0n0,down,EXECJOB_BEGIN: RECHECK 1/40 grand mdc disconnect threshold exceeded(3/10min) (job 2471003)</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=go>x4703c6s4b0n0,down,</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=go>x4703c7s4b0n0,down,EXECJOB_END: RECHECK 2/40 grand mdc disconnect threshold exceeded(3/10min) (job 1070810)</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=go>x4210c2s1b0n0,down,node down: communication closed</span>
</span></code></pre></div></p> <!-- *[ALCF]: Argonne Leadership Computing Facility --> <!-- *[AMD]: Advanced Micro Devices --> <!-- *[API]: Application Programming Interface --> <!-- *[CLI]: Command Line Interface --> <!-- *[CPU]: Central Processing Unit --> <!-- *[CUDA]: Compute Unified Device Architecture --> <!-- *[DRAM]: Dynamic Random-Access Memory --> <!-- *[GCC]: GNU Compiler Collection --> <!-- *[GDB]: GNU Debugger --> <!-- *[GPU]: Graphics Processing Unit --> <!-- *[HPC]: High Performance Computing --> <!-- *[HPE]: Hewlett Packard Enterprise --> <!-- *[I/O]: Input/Output --> <!-- *[LLVM]: Low Level Virtual Machine --> <!-- *[MPI]: Message Passing Interface --> <!-- *[OpenMP]: Open Multi-Processing --> <!-- *[OS]: Operating System --> <!-- *[PBS]: Portable Batch System --> <!-- *[RAM]: Random Access Memory --> <!-- *[SDK]: Software Development Kit --> <!-- *[SFTP]: SSH File Transfer Protocol --> <!-- *[SSH]: Secure Shell --> <!-- *[SYCL]: --> <!-- *[URL]: Uniform Resource Locator --> <!-- *[XALT]:  --> <div class=footnote> <hr> <ol> <li id=fn:1> <p>Theoretical max node count. The stable max node count may vary; see <a href=../../running-jobs/#pbsnodes-get-information-about-the-current-state-of-nodes>pbsnodes</a> and <a href=https://github.com/saforem2/pbs-tui>pbs-tui</a> for current node count.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:1 title="Jump back to footnote 1 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:1 title="Jump back to footnote 1 in the text">&#8617;</a><a class=footnote-backref href=#fnref4:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <!-- Footer --> <!-- --------------------------------------------------------------------- --> <footer> <div class=grid> <div class=footer--attr> <h2> <span>ALCF</span> A DOE Office of Science User Facility </div> <div class=footer--address> <p> Argonne National Laboratory<br> 9700 South Cass Avenue<br> Building 240<br> Argonne, IL 60439<br> <a href=mailto:media@alcf.anl.gov>Contact</a> </p> <!-- Social links from mkdocs-material theme --> <div class=footer--social> <div class=md-social> <a href=https://github.com/argonne-lcf/user-guides target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://www.youtube.com/c/argonneleadershipcomputingfacility target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg> </a> <a href=https://x.com/argonne_lcf target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg> </a> <a href=https://www.facebook.com/argonne.lcf/ target=_blank rel=noopener title=www.facebook.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg> </a> </div> </div> </div> <div class=footer--admin> <a href="https://login.anl.gov/idp/profile/SAML2/Redirect/SSO?execution=e1s1">Internal Admin</a> </div> <div class=footer--copyright> <p> &copy; <span id=current-year></span> Argonne Leadership Computing Facility </p> </div> <div class=footer--logos> <img class=footer--logo-doe src=https://docs.alcf.anl.gov//images/doe.png> <img class=footer--logo-argonne src="https://docs.alcf.anl.gov//
		images/ANL_ko_300.png"> <img class=footer--logo-argonne src="https://docs.alcf.anl.gov//
		images/UCHI.png"> </div> </div> </footer> <script>
  // Update the year on initial page load
  document.addEventListener('DOMContentLoaded', function() {
    updateYear();
  });
  
  // Update the year when using instant loading
  if (document.querySelector('.md-content')) {
    // For mkdocs-material's instant loading feature
    var observer = new MutationObserver(function(mutations) {
      updateYear();
    });
    
    observer.observe(document.querySelector('.md-content'), {
      childList: true,
      subtree: true
    });
  }
  
  function updateYear() {
    var yearElement = document.getElementById('current-year');
    if (yearElement) {
      yearElement.textContent = new Date().getFullYear();
    }
  }
</script> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "navigation.sections", "toc.follow", "search.highlight", "search.suggest"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../javascripts/alcf-extra.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.date.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.number.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.filesize.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.dotsep.js></script> <script src=../../javascripts/tablesort.js></script> </body> </html>